<html>
<head>
<title>ЛОГИЧЕСКАЯ ОРГАНИЗАЦИЯ ПАМЯТИ </title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<link rel="stylesheet" href="../images/styles.css" type="text/css">
</head>
<h1 align="center">ЛОГИЧЕСКАЯ ОРГАНИЗАЦИЯ ПАМЯТИ </h1>
<p>Для процессора i8086 и реального режима работы процессоров последующих моделей 
  адрес при доступ к памяти формировался с помощью двух компанент - сегмента, 
  содержащего старшие 16 разрядов 20-ти разрядного физического адреса (обусловлено 
  разрядностью шины 16-битного процессора) и смещения, 12 старших бит которого 
  добавляется с сегменту, а 4 бита составляют младшие разряды физического адреса. 
  Если при добавлении старших 12-ти бит смещения сегмент переполняется, то сегмент 
  должен обнуляться, что, однако, не происходит в процессорах 80286 и старше (см. 
  HMA). Так как первой системой для ПЭВМ была MS-DOS фирмы Microsoft, то и разделение 
  памяти на области в реальном режиме связано со структурой этой системы. В зависимости 
  от модификации персонального компьютера и состава его периферийного оборудования, 
  распределение адресного пространства может несколько различаться. Тем не менее, 
  размещение основных компонентов системы довольно строго унифицировано.</p>
<p> Типичная схема использования адресного пространства компьютера приведена на 
  рис .4., значения адресов приведены в в шестнадцатеричной системе счисления.</p>
<p align="center"> <img src="images/mem4.jpg" width="500" height="403"></p>
<p align="center">Рис. 4. Типичное распределение адресного пространства.</p>
<p><br>
  Первые 640 Кбайт адресного пространства с адресами от 00000h до 9FFFF11 (и, 
  соответственно, с сегментными адресами от 0000h до 9FFFh) отводятся под основную 
  оперативную память, которую еще называют стандартной (conventional). Начальный 
  килобайт оперативной памяти занят векторами прерываний, которые обеспечивают 
  работу системы прерываний компьютера, и включает 256 векторов по 4 байта каждый. 
  Вслед за векторами прерываний располагается так называемая область данных BIOS, 
  которая занимает всего 256 байт, начиная с сегментного адреса 40h. Сама BIOS 
  (от Basic In-Out System, базовая система ввода-вывода) является частью операционной 
  системы, хранящейся в постоянном запоминающем устройстве. Это запоминающее устройство 
  (ПЗУ BIOS) располагается на системной плате компьютера и является, таким образом, 
  примером встроенного, или &quot;зашитого&quot; программного обеспечения. В функции 
  BIOS входит тестирование компьютера при его включении, загрузка в оперативную 
  память собственно операционной системы MS-DOS, хранящейся на магнитных дисках, 
  а также управление штатной аппаратурой компьютера - клавиатурой, экраном, дисками 
  и прочим. В области данных BIOS хранятся разнообразные данные, используемые 
  программами BIOS в своей работе.<br>
  Область данных BIOS заполняется информацией в процессе начальной загрузки компьютера, 
  а затем динамически модифицируется системой по мере необходимости. Многие прикладные 
  программы, особенно, написанные на языке ассемблера, обращаются к этой области 
  с целью чтения или модификации содержащихся в них данных. С некоторыми ячейками 
  области данных BIOS мы столкнемся при рассмотрении примеров конкретных программ.</p>
<p> В области памяти, начиная с адреса 500h, располагается собственно операционная 
  система MS-DOS, которая обычно занимает несколько десятков Кбайт. Программы 
  MS-DOS, как и другие системные составляющие (векторы прерываний, область данных 
  BIOS) записываются в память автоматически в процессе начальной загрузки компьютера.<br>
  Вся оставшаяся память до границы 640 Кбайт свободна для загрузки любых системных 
  или прикладных программ. Как правило, в начале сеанса в память загружают резидентные 
  программы (русификатор, антивирусные программы). При наличии резидентных программ 
  объем свободной памяти уменьшается.<br>
  Оставшиеся 384 Кбайт адресного пространства между границами 640 Кбайт и 1 Мбайт, 
  называемые старшей, или верхней (upper) памятью, первоначально были предназначены 
  для размещения постоянных запоминающих устройств (ПЗУ). Практически под ПЗУ 
  занята только небольшая часть адресов, а остальные используются в других целях.<br>
  Часть адресного пространства старшей памяти отводится для адресации к графическому 
  и текстовому видеобуферам графического адаптера. Графический адаптер представляет 
  собой отдельную микросхему или даже отдельную плату, в состав которой входит 
  собственное запоминающее устройство (видеопамять). Это запоминающее устройство 
  не имеет никакого отношения к оперативной памяти компьютера, однако, его схемы 
  управления настроены на диапазоны адресов A0000h...AFFFFh и B8000h...BFFFFh, 
  входящих в общее с памятью адресное пространство процессора. Поэтому любая программа 
  может обратиться по этим адресам и, например, записать данные в видеобуфер, 
  что приведет к появлению на экране некоторого изображения. Если видеосистема 
  находится в текстовом режиме, а запись осуществляется по адресам текстового 
  видеобуфера, на экране появятся изображения тех или иных символов (букв, цифр, 
  различных знаков). Если же перевести видеосистему в графический режим, и записывать 
  данные в графический видеобуфер, то на экране появятся отдельные точки или линии. 
  Можно также прочитать текущее содержимое ячеек видеобуфера.<br>
  В самом конце адресного пространства, в области адресов F0000h...FFFFFh, располагается 
  ПЗУ BIOS - постоянное запоминающее устройство, о котором уже говорилось выше.<br>
  <br>
  Верхняя память<b>HMA :</b> область памяти в диапазоне адресов 10000h:0010h..10000h:FFFFh. 
  Она доступна в реальном режиме процессора 80286 и старше ввиду того, что при 
  переполнении сегментного адреса (при вычислении физического адреса старшие 12 
  бит смещения добавляются к сегменту) не происходит его обнуления и обращение 
  идет к адресам за пределами пространства в 1024Кбайт. Эта область становится 
  доступной при загрузке специального драйвера, деблокирующего адресную линию 
  A20 (т.е. 21-ый разряд адресной шины - у 8086/8088 только 20 адресных линий). 
  В MS-DOS это драйвер HIMEM.SYS. Впрочем, DOS чаще использует эту область для 
  загрузки туда своей части (драйверы, буферы, стек, обработчики функций и т.д.). 
</p>
<p>К расширенной памяти<b>EXTENDED MEMORY </b>относят всю остальную память за 
  пределами первого мегабайта. Доступ к ней в реальном режиме невозможен без специальных 
  средств (впрочем, есть исключение). Одним из них является интерфейс <b>XMS </b>- 
  eXtended Memory Specification. Он позволяет выделять, копировать, удалять блоки 
  расширенной памяти с помощью функций прерывания Int 2Fh 43xxh. </p>
<p>Интерфейс <b>EMS</b> - Expanded Memory Specification, в начале предполагал 
  наличие отдельного устройства - платы с памятью, которая подключалась к доступным 
  адресам верхней памяти - обычно начиная с адресов D000h - E800h. В этом диапазоне 
  организовывалась область размером 64 Кбайта, разделяемая на 4 окна (фрейма) 
  по 16 Кбайт. В эти окна, используя вызовы драйвера <b>EMS</b>, программист мог 
  "видеть" любые страницы памяти, размешенной на плате. Однако с появлением 32-разрядных 
  процессоров использование дополнительных контроллеров стало нецелесообразным, 
  т.к. это значительно замедляло систему и повышало ее стоимость. Поэтому от внешней 
  памяти быстро отказались, но принципы, заложенные в основу интерфейса <b>EMS</b>, 
  оказались настолько удачны, что драйвера EMS используются и по сей день для 
  организации доступа к памяти за пределами первого мегабайта. В организованные 
  области, наполненные памятью, загружаются резидентные программы и драйверы DOS. 
  Для работы этого механизма нужен драйвер <b>XMS</b> - <b>EMM386 и</b>ли подобный 
  ему, иначе области памяти окажутся "пустыми", т.е. без реальной памяти, соответствующей 
  адресам. </p>
<p> Теневая память (shadow RAM) - еще одно средство повышения производительности 
  ПЭВМ. Известно, что микросхема ПЗУ, хранящая BIOS, Setup, POST и другие важные 
  системные программы, подключается к общей системе через общую шину ISA (см. 
  Общая архитектура ПЭВМ). Поэтому доступ к ней намного медленнее, чем к обычной 
  памяти. Чтобы преодолеть этот недостаток, содержимое ПЗУ копируется в обычную 
  память на этапе начальной загрузки ПЭВМ и остается там все время работы системы. 
  Обращение по адресам 0F000h - 0FFFFh производится не к ПЗУ, а к обычной динамической 
  памяти, и является столь же быстрым. Возможно также и кэширование этих адресов, 
  однако в данном случае оно не играет большой роли, т.к. в ПЗУ хранятся в основном 
  обработчики прерываний BIOS. </p>
<hr class=forhr align="center">
<div align="center">
  <table width="600">
    <tr> 
      <td width="143"> 
        <p align="left"><a href="memory0.htm" target="mainFrame">назад</a></p>
      </td>
      <td width="237"> 
        <p align="right"><a href="memory1.htm"target="mainFrame">вперед<b> </b></a></p>
      </td>
    </tr>
  </table>
</div>
<h1>&nbsp;</h1  >
<p>&nbsp;</p>
</body>
</html>
