<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>
</title>
<meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
</head>
<body background="../FON.JPG" BGCOLOR="#E7E3E7" TEXT="#000000" LINK="#004080" VLINK="#004080">
<table COLS="3" WIDTH="16%">
<tr>
<td>
<font face="Arial, Helvetica, sans-serif">
<a href="Index29.htm">
<img SRC="Back.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td WIDTH="10%">
<font face="Arial, Helvetica, sans-serif">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Arial, Helvetica, sans-serif">
<a href="Index31.htm">
<img SRC="For.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
</tr>
</table>
<p>
&nbsp;
</p>
<p align="center">
<font face="Arial, Helvetica, sans-serif" size="3">
<font size="4">
STI Установка флага прерывания 
</font>
<br>
</font>
</p>
<p align="left">
<font face="Arial, Helvetica, sans-serif" size="3">
  Команда STI устанавливает флаг разрешения прерываний IF в регистре флагов, разрешая 
  все аппаратные прерывания (от таймера, клавиатуры, дисков и т.д.). Команда не 
  имеет параметров и не воздействует на остальные флаги процессора.</p>
<p align="center"><b>Пример</b></p>
<blockquote>
<p><br>

</font>
  <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  sti ;Разрешение аппаратных прерываний</font></p>
<p>&nbsp;</p>
</blockquote>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">STOS Запись 
  в строку данных</font>
  </p>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">
  STOSB Запись байта в строку данных</font>
  </p>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">
STOSW Запись слова в строку данных</font>
  </p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><br>
Команды предназначены для 
  операций над строками (строкой называется последовательность байтов или слов 
  памяти с любым содержимым). Они копируют содержимое регистра AL (в случае операций 
  над байтами) или АХ (в случае операций над словами) в ячейку памяти соответствующего 
  размера по адресу, определяемому содержимым пары регистров ES:DI. После операции 
  копирования регистр DI получает положительное (если флаг DF=0) или отрицательное 
  (если флаг DF=1) приращение. Величина приращения составляет 1 или 2 в зависимости 
  от размера копируемого элемента.<br>
  Вариант команды stos имеет формат
  </p>
  <blockquote>
<p>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">stos строка</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p>(что не избавляет от необходимости 
  инициализировать регистры ES:DI адресом строки строка). Заменить сегментный 
  регистр ES нельзя.<br>
  Рассматриваемые команды могут предваряться префиксом повторения rep. В этом 
  случае они повторяются СХ раз, заполняя последовательные ячейки памяти одним 
  и тем же содержимым регистра AL или АХ. Команда не воздействует на флаги процессора.</p>
<p align="center"><b>Пример 1</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ;В полях данных сегмента данных, адресуемого через ES:<br>
  id db 'ID:'<br>
  ;В программном сегменте:<br>
  eld ;Движение по строке вперед<br>
  mov DI,offset id+3;DI -&gt; за знаком ':'<br>
  mov AL,'3' ;Код ASCII цифры 3<br>
  stosb ;Отправим в строку<br>
  mov AL,'9' ;Код ASCII цифры 9<br>
  stosb ;Отправим в строку <br>
  ;Теперь в строке id записано 'ID:39'</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 2</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ;В полях данных сегмента данных, адресуемого через ES:<br>
  array dw 10000 dup (?) ;Место под массив слов<br>
  ; В программном сегменте:<br>
  mov AX,-1 ;Число-заполнитель <br>
  mov CX,10000 ;Заполнить 10000 слов <br>
  сld ;Движение по строке вперед <br>
  lea DI,array ;ES:DI ® array<br>
  rep stosw ;Bce 10000 элементов массива<br>
  ;получают значение -1 (FFFFh)</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 3</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ;В полях данных сегмента данных, адресуемого через ES: <br>
  line db 80 dup (' ') ;Пустая пока строка <br>
  ;В программном сегменте:<br>
  mov AL,'&gt;' ;Код ASCII знака '&gt;'<br>
  mov CX,5 ;Заполнить 5 слов<br>
  eld ;Движение по строке вперед<br>
  lea DI,line ;ES:DI -&quot; line<br>
  rep stos line ;Первые 5 байт строки line<br>
  ;заполняются кодом ASCII <br>
  ;знака ' &gt;'</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 4</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ;В полях данных сегмента данных, адресуемого через ES: <br>
  line dw 80 dup (0) ;Строка, заполненная нулями <br>
  ;В программном сегменте:<br>
  mov AL,'&gt;' ;Код ASCII знака '&gt;' <br>
  mov AH,31h ;Атрибут (синий по бирюзовому) <br>
  mov CX,5 ; Заполнить 5 слов <br>
  сld ;Движение по строке вперед <br>
  lea DI,line ;ES:DI -&quot; line<br>
  rep stos line ;Первые 5 слов строки line<br>
  ;заполняются кодом ASCII <br>
  ;знака '&gt;'вместе с атрибутом <br>
  ;для последующего вывода на экран</font></p>
<p>&nbsp;</p>
</blockquote>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">386+ STOSD 
  Запись двойного слова в строку данных</font></p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><br>
  Команда аналогична командам МП 86 stosb и stosw, но позволяет записать в строку, 
  адресуемую через регистры ES:EDI, двойное слово из регистра ЕАХ.</p>
<p align="center"><b>Пример</b></p>

  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных<br>
  dat dd 12789,2,550000,100000<br>
  ; В программном сегменте<br>
  mov ЕАХ,444777<br>
  push DS<br>
  pop ES ;ES=DS<br>
  mov DI, off set dat<br>
  add DI,4*2 ;DS:SI -&quot; 3-й элемент массива <br>
  ;чисел<br>
  stosd ;dat=12789,2,444777,100000</font></p>

</blockquote>
<p>
&nbsp;
</p>
<table COLS="3" WIDTH="16%">
<tr>
<td>
<font face="Arial, Helvetica, sans-serif">
<a href="Index29.htm">
<img SRC="Back.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td WIDTH="10%">
<font face="Arial, Helvetica, sans-serif">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Arial, Helvetica, sans-serif">
<a href="Index31.htm">
<img SRC="For.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
</tr>
</table>
</body>
</html>
