<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>
</title>
<meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
</head>
<body background="../FON.JPG" BGCOLOR="#E7E3E7" TEXT="#000000" LINK="#004080" VLINK="#004080">
<table COLS="3" WIDTH="16%">
<tr>
<td>
<font face="Arial, Helvetica, sans-serif">
<a href="Index12.htm">
<img SRC="Back.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td WIDTH="10%">
<font face="Arial, Helvetica, sans-serif">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Arial, Helvetica, sans-serif">
<a href="Index14.htm">
<img SRC="For.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
</tr>
</table>
<p>
&nbsp;
</p>
<p align="center">
<font face="Arial, Helvetica, sans-serif" size="3">
<font size="4">
MP Безусловный переход
</font>
<br>
</font>
</p>
<p align="left">
<font face="Arial, Helvetica, sans-serif" size="3">
  Команда jmp передает управление в указанную точку того же или другого программного 
  сегмента. Адрес возврата не сохраняется. Команда не воздействует на флаги процессора.<br>
  Команда jmp имеет пять разновидностей:<br>
  - переход прямой короткий (в пределах -128... + 127 байтов);<br>
  - переход прямой ближний (в пределах текущего программного сегмента) ;<br>
  - переход прямой дальний (в другой программный сегмент);<br>
  - переход косвенный ближний;<br>
  - переход косвенный дальний.<br>
  Все разновидности переходов имеют одну и ту же мнемонику
jmp, хотя и различающиеся 
  коды операций. Во многих случаях транслятор может определить вид перехода по 
  контексту, в тех же случаях, когда это невозможно, следует использовать атрибутные 
  операторы:

</font>
</p>
<blockquote>
<p align="left">
<font face="Arial, Helvetica, sans-serif" size="3">
  <br>

</font>
<font face="Verdana, Arial, Helvetica, sans-serif" size="3"><b>
  short</b> - прямой короткий переход;</font></p>
<p align="left">
<font face="Verdana, Arial, Helvetica, sans-serif" size="3"><b>
  near ptr </b> - прямой ближний переход;</font></p>
<p align="left">
<font face="Verdana, Arial, Helvetica, sans-serif" size="3"><b>
  far ptr</b> - прямой дальний переход;</font></p>
<p align="left">
<font face="Verdana, Arial, Helvetica, sans-serif" size="3"><b>
  word ptr</b> - косвенный ближний переход;</font></p>
<p align="left">
<font face="Verdana, Arial, Helvetica, sans-serif" size="3"><b>
  dword ptr </b> - косвенный дальний переход.</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Примеры прямого короткого
перехода</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  jmp short shpt ;Переход на метку shpt<br>
  ;в пределах +127...-128 байтов<br>
  jmp shpt ;To же самое, если shpt<br>
  ;находится выше по тексту программы</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Примеры прямого ближнего перехода</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  jmp pt ;Переход на метку pt<br>
  ;в пределах текущего сегмента <br>
  jmp near ptr pt ;To же самое</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Примеры косвенных ближних переходов 
  </b>
  </p>
<p align="center"><br>
  <b>Пример 1</b>
  </p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  mov BX,offset pt ;ВХ=адрес точки перехода <br>
  jmp BX ;Переход в точку pt</font>
<font face="Arial, Helvetica, sans-serif" size="3">
  <br>
  </p>
  </blockquote>
<p align="center"><b>Пример 2</b>
  </p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ;В полях данных:<br>
  addr dw pt ;Ячейка с адресом точки перехода<br>
  ;В программном сегменте:<br>
  jmp DS:addr ;Переход в точку pt<br>
  jmp word ptr addr ;To же самое<br>
    </font>
  </p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 3</b>
  </p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  addr dw pt ;Ячейка с адресом точки перехода<br>
  ;В программном сегменте:<br>
  mov DI,offset addr ;В1=адрес ячейки с адресом<br>
  ;точки перехода<br>
  jmp [DI] ;Переход в точку pt</font>
<font face="Arial, Helvetica, sans-serif" size="3">
  <br>
  </p>
  </blockquote>
<p align="center"><b>Пример 4</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ;В полях данных:<br>
  tbl dw ptl ;Ячейка с адресом 1 <br>
  dw pt2 ;Ячейка с адресом 2 <br>
  dw pt3 ;Ячейка с адресом 3<br>
  ;В программном сегменте:<br>
  mov BX,offset tbl ;BX=aflpec таблицы адресов переходов <br>
  mov SI, 4 ;31=смещение к адресу pt3 <br>
  call [BX][SI] ;Переход в точку pt3</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Примеры прямых дальних переходов</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  jmp far ptr farpt ;Переход на метку farpt в<br>
  ;другом программном сегменте<br>
  jmp farpt ;Переход на метку farpt в другом <br>
  ;программном сегменте, если farpt <br>
  ;объявлена дальней меткой <br>
  ;директивой farpt label far</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Примеры косвенных дальних переходов</b></p>
<p align="center"><b>Пример 1</b>
  </p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  addr dd pt ;Поле с двухсловным<br>
  ;адресом точки перехода ;В программном сегменте:<br>
  jmp DS:addr ;Переход в точку pt<br>
  jmp dword ptr addr ;To же самое</font>
<font face="Arial, Helvetica, sans-serif" size="3">
  <br>
  </p>
  </blockquote>
<p align="center"><b>Пример 2</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  addr dd pt ;Поле с двухсловным<br>
  ;адресом точки перехода <br>
  ;В программном сегменте:<br>
  mov DI,offset addr ;DI =адрес поля с адресом<br>
  ;точки перехода jmp [DI] ;Переход в точку pt</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><b><img src="pr.gif" > </b>Допустимо использование 
  дополнительных режимов адресации 32-разрядных процессоров. Для 32-разрядных 
  приложений допустимо использование 32-битовых операндов. В защищенном режиме 
  вместо сегментного адреса сегмента (при дальних переходах) выступает его селектор.</p>
<p>&nbsp;</p>

</font>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">LAHF Загрузка 
  флагов в регистр АН</font></p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><br>
  Команда lahf копирует флаги SF, ZF, AF, PF и CF соответственно в разряды 7, 
  6, 4, 2 и 0 регистра АН. Значение битов 5, 3 и 1 регистра АН не определено. 
  Команда не имеет параметров и не изменяет флаги процессора.<br>
  Команда lahf (совместно с командой sahf) дает возможность читать и изменять 
  значения флагов процессора, в том числе флагов
SF, ZF, AF и PF, которые нельзя 
  изменить непосредственно. Однако следует иметь в виду, что команда lahf переносит 
  в АН только младший байт регистра флагов. Поэтому нельзя изменить с ее помощью, 
  например, состояние флага OF.</p>
<p align="center"><b>Пример 1</b>
  </p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  lahf ;Регистр АН отображает<br>
  ;состояние регистра флагов <br>
  or AH,80h ;Установка бита 7 = SF <br>
  sahf ;Загрузка АН в регистр<br>
  ;флагов, где теперь SF = 1<br>
    </font>
  </p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 2</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  lahf ;Регистр АН отображает<br>
  ;состояние регистра флагов <br>
  and AH,0BFh ;Сброс бита 6 = ZF <br>
  sahf ;Загрузка АН в регистр<br>
  ;флагов, где теперь ZF = О</font></p>
<p>&nbsp;</p>
</blockquote>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">386Р+ LAR Загрузка 
  прав доступа</font></p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><br>
  Команда lar загружает в первый операнд (16- или 32-разрядный регистр) поле атрибутов 
  сегмента из дескриптора сегмента, заданного селектором во втором операнде. В 
  качестве операнда с селектором может использоваться 16- или 32-разрядный регистр 
  или ячейка памяти. В операнд-приемник поступают два байта атрибутов селектора 
  с замаскированным полем старших битов границы сегмента.</p>
<p>&nbsp;</p>

</font>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">LDS Загрузка 
  указателя с использованием регистра DS</font></p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><br>
  Команда Ids считывает из памяти по указанному адресу двойное слово (32 бит), 
  содержащее указатель (полный адрес некоторой ячейки), и загружает младшую половину 
  указателя (т.е. относительный адрес) в указанный в команде регистр, а старшую 
  половину указателя (т.е. сегментный адрес) в регистр
DS. Таким образом, команда</p>
  <blockquote>
<p>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">Ids reg, mem</font> </p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p>эквивалентна следующей группе команд:</p>

</font>
<blockquote>
<p><font face="Verdana, Arial, Helvetica, sans-serif" size="3">mov reg,word ptr mem <br>
  mov DS,word ptr mem+2</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p>В качестве первого операнда команды 
  Ids указывается регистр общего назначения; в качестве второго - ячейка памяти 
  с двухсловным содержимым. Указатель, содержащийся в этой ячейке, может быть 
  адресом как процедуры, так и поля данных. Команда не воздействует на флаги процессора.</p>
<p align="center"><b>Пример 1</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  addr dd myproc ;Двухсловный адрес процедуры<br>
;myproc <br>
  ;В программном сегменте:<br>
  Ids SI,addr ;DS:SI -&gt; myproc</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 2</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  mem dw 25 ;Ячейка памяти с<br>
  ; произвольным содержимым <br>
  addr dd myproc ;Двухсловный адрес этой<br>
  ;ячейки <br>
  ;В программном сегменте:<br>
  mov BX,offset addr ;ВХ=адрес ячейки addr<br>
  Ids DX, [BX] ;DХ=смещение ячейки mem,<br>
;DS=сегментный адрес ячейки <br>
;mem</font></p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 3</b></p>
<p align="left"><br>
  </font><font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  dptr dd procl ;Полный адрес процедуры<br>
  ; р г о с 1 <br>
  dd proc2 ;Полный адрес процедуры<br>
  ;ргос2 <br>
  dd ргосЗ ;Полный адрес процедуры<br>
  ; р г о с 3 <br>
  ;В программном сегменте:<br>
  mov SI, 8 ; Смещение к адресу ргосЗ <br>
  Ids DI,dptr[SI] ;DS:DI ® ргосЗ</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><img src="pr.gif" > Допустимо использование 
  32-разрядного регистра-приемника и 32-битового смещения в памяти, а также дополнительных 
  режимов адресации 32-разрядных процессоров. В защищенном режиме вместо сегментного 
  адреса сегмента выступает его селектор.</p>
<p>&nbsp;</p>

</font>
<p align="center"><font face="Arial, Helvetica, sans-serif" size="4">LEA Загрузка 
  исполнительного адреса</font></p>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><br>
  Команда lea загружает в регистр, указанный в команде в качестве первого операнда, 
  относительный адрес второго операнда (не значение операнда!). В качестве первого 
  операнда следует указывать регистр общего назначения (не сегментный), в качестве 
  второго - ячейку памяти. Команда</p>
  <blockquote>
<p>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">lea reg,mem</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p>эквивалентна команде</p>
  <blockquote>
<p>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">mov reg,offset mem</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p>но у первой команды больше возможностей 
  описания адреса интересующей нас ячейки. Команда не воздействует на флаги процессора.</p>
<p align="center"><b>Пример 1</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  message db ; 'Идут измерения'<br>
  ;В программном сегменте:<br>
  lea SI,message ;DS:SI -&gt; message</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 2</b></p>
  <blockquote>
<p><br>

</font>
    <font face="Verdana, Arial, Helvetica, sans-serif" size="3">
  ; В полях данных:<br>
  nmb db '0123456789'<br>
  ;В программном сегменте:<br>
  mov SI,7 ;Смещение символа '7' <br>
  lea DX,nmb[SI] ;ВХ=адрес символа '7'</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p align="center"><b>Пример 3</b></p>

</font>
<blockquote>
<p><font face="Verdana, Arial, Helvetica, sans-serif" size="3"><br>
  ; В полях данных:<br>
  nmb db '0123456789'<br>
  ;В программном сегменте:<br>
  mov BX, off set msg<br>
  mov SI, 9 ;Смещение символа '9'<br>
  lea SI, [BX] [SI] ;31=адрес символа '9'</font></p>
</blockquote>
<font face="Arial, Helvetica, sans-serif" size="3">
<p><b><img src="pr.gif" > </b>Допустимо использование 
  32-битовых операндов и дополнительных режимов адресации 32-разрядных процессоров.</p>

</font>
<p>
&nbsp;
</p>
<table COLS="3" WIDTH="16%">
<tr>
<td>
<font face="Arial, Helvetica, sans-serif">
<a href="Index12.htm">
<img SRC="Back.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td WIDTH="10%">
<font face="Arial, Helvetica, sans-serif">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Arial, Helvetica, sans-serif">
<a href="Index14.htm">
<img SRC="For.gif" BORDER="0" width="73" height="22">
</a>
</font>
</td>
</tr>
</table>
</body>
</html>
