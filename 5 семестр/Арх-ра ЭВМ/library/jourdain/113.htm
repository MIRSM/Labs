<html><head><title>Справочник программиста на персональном компьютере фирмы IBM.Роберт Журден</title> <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> <link rel=stylesheet type=text/css href=style.css> </head><body> <p class="hdr1">Глава 1. Системные ресурсы.</p> <p class="hdr2">Раздел 1. Ревизия системных ресурсов.</p> <p class="hdr3">1.1.3 Определение версии MS DOS.</p> <p> По мере развития MS DOS к ней добавлялись новые возможности, многие из которых существенно облегчают написание определенных частей программы по сравнению с предыдущими версиями. Чтобы иметь гарантию что программа будет работать с любой версией MS DOS она должна использовать только функции, доступные в MS DOS 1.0. В системе предусмотрено прерывание, возвращающее номер версии MS DOS. Это число может использоваться для проверки выполнимости Вашей программы. Минимально, программа может при старте выдавать сообщение об ошибке, сообщая что ей нужна другая версия MS DOS. <p> Средний уровень. <p> Функция 30H прерывания 21H возвращает номер версии MS DOS. Старший номер версии (2 из 2.10) возвращается в AL, а младший номер версии (10 из 2.10) возвращается в AH (обратите внимание, что младший номер .1 возвращает значение AH, а не 1H). AL может содержать 0, что указывает на версию MS DOS меньшую чем 2.0. Это прерывание меняет содержимое регистров BX и CX, в которых возвращается значение 0. <table align="center"> <tr><td></td><td>;--- Определение версии MS DOS:</td></tr> <tr><td>MOV AH,30H </td><td>;номер функции получения версии</td></tr> <tr><td>INT 21H </td><td>;получить номер версии</td></tr> <tr><td>CMP AL,2 </td><td>;проверка на версию 2.х</td></tr> <tr><td>JL WRONG_DOS </td><td>;если меньше 2, то выдать сообщение</td></tr> </table> <hr><p align="center">
<~-<a href="112.htm">1.1.2 Определение типа IBM PC.</a><br><a href="index.htm#header">Содержание</a><br><a href="114.htm">1.1.4 Определение числа и типов адаптеров дисплея.</a>-~>
</p></body></html>
