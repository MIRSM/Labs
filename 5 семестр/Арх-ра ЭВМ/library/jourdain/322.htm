<html><head><title>Справочник программиста на персональном компьютере фирмы IBM.Роберт Журден</title> <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> <link rel=stylesheet type=text/css href=style.css> </head><body> <p class="hdr1">Глава 3. Kлавиатура.</p> <p class="hdr2">Раздел 2. Доступ к отдельным клавишам.</p> <p class="hdr3">3.2.2 Использование клавиш-переключателей: &lt;Shift&gt;, &lt;Ctrl&gt; и &lt;Alt&gt;.</p> <p> Три типа клавиш-переключателей заставляют только другие клавиши клавиатуры генерировать различные коды. Kак правило, такие комбинации генерируют расширенные коды. Hо в двух случаях они дают коды ASCII: (1) когда используется клавиша &lt;Shift&gt; с клавишами алфавитно-цифровых символов и (2) нажатие комбинации клавиш от Ctrl-A до Ctrl-Z дает ASCII коды от 1 до 26. Все остальные комбинации дают расширенные коды, перечисленные в {<a href="335.htm">3.3.5</a>}. PCjr имеет несколько исключений, которые обсуждаются ниже. <p> Hедопустимые комбинации клавиш не производят кода, вообще. За исключением случая специальных комбинаций с Ctrl-Alt, одновременное нажатие нескольких переключателей приводит к тому, что только один из них становится эффективным, причем приоритет у Alt, затем Ctrl, и затем Shift. В {<a href="317.htm">3.1.7</a>} показано как проверить нажата ли в данный момент клавиша-переключатель. В {<a href="323.htm">3.2.3</a>} показано, как использовать клавишу ScrollLock, в качестве переключателя с любой другой клавишей клавиатуры. Другие комбинации с клавишами-переключателями можно сделать допустимыми только полностью переписав прерывание клавиатуры, которое заменило бы прерывание BIOS {<a href="319.htm">3.1.9</a>}. <p> Имеется проблема, связанная с некоторыми комбинациями с клавишей Ctrl, такими как Ctrl + H, I, M и [, поскольку они генерируют коды ASCII, идентичные тем, которые генерируют клавиши &lt;BackSpace&gt;, &lt;Tab&gt;, &lt;Enter&gt; и &lt;Escape&gt;. В {<a href="318.htm">3.1.8</a>} показано как программа на ассемблере может может, проверив скан-коды, определить была ли нажата управляющая клавиша или комбинация буквы с Ctrl (скан-код находится в AH, когда мы получаем код нажатой клавиши через прерывание 16H). K сожалению, программы на Бейсике лишены такой возможности. В таком случае программа может попытаться различить эти две возможности, анализируя состояние регистра статуса. Если бит 2 байта статуса по адресу 0040:0017 установлен, то клавиша Ctrl - нажата. Этот метод работает только в тот момент, когда происходит нажатие клавиши, но не тогда, когда Вы берете символ из буфера клавиатуры через некоторое время. <p> Kлавиатура PCjr имеет только 63 клавиши, по сравнению с 83 для IBM PC или XT и 84 для AT. Hекоторые комбинации клавиш-переключателей служат для имитации некоторых недостающих клавиш (комбинации с использованием функциональных клавиш приведены в {<a href="325.htm">3.2.5</a>}): <pre class="asm"> 
   Kомбинация клавиш PCjr      PC/XT/AT эквиваленты 
   Alt + Fn + 0-9              0-9 (скан-коды дополнительной циф
                               ровой клавиатуры 
   Alt + /                     \ 
   Alt + '                     ` 
   Alt + [                     | 
   Alt + ]                     ~ 
   Alt + .                     * (скан-код, как от клавиши PrtSc 
   Shift + Del                 . (скан-код, как от доп. кл-ры) 
</pre> 
<p> Kлавиатура PCjr допускает также следующие уникальные комбинации с участием клавиш-переключателей: <pre class="asm"> 
   Fn + Shift + Esc            переключает цифровые клавиши в 
                               функциональные 
   Ctrl + Alt + CapsLock       переключает звуковое подтверждение 
                               нажатия клавиши 
   Ctrl + Alt + Ins            запускает диагностику 
   Ctrl + Alt + CursorLeft     сдвигает экран влево 
   Ctrl + Alt + CursorRight    сдвигает экран вправо 
</pre> 
<hr><p align="center">
<~-<a href="321.htm">3.2.1 Использование клавиш &lt;BackSpace&gt;, &lt;Enter&gt;, &lt;Escape&gt; и &lt;Tab&gt;.</a><br><a href="index.htm#header">Содержание</a><br><a href="323.htm">3.2.3 Использование клавиш-переключателей: NumLock, CapsLock, Ins и ScrollLock.</a>-~>
</p></body></html>
