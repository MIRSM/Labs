<html><head><title>Справочник программиста на персональном компьютере фирмы IBM.Роберт Журден</title> <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> <link rel=stylesheet type=text/css href=style.css> </head><body> <p class="hdr1">Глава 4. Вывод на терминал.</p> <p class="hdr2">Раздел 2. Управление курсором.</p> <p class="hdr3">4.2.3 Включение и выключение курсора.</p> <p> Kурсор генерируется микросхемой 6845. Он функционирует совершенно независимо от видеопамяти. Это значит, что при прямой адресации в память дисплея {<a href="431.htm">4.3.1</a>} программное обеспечение должно координировать перемещения курсора с вставкой нового символа в буфер. Отметим, что микросхема 6845 не может ни создавать немерцающий курсор, ни изменить частоту его мерцания. В {<a href="426.htm">4.2.6</a>} показано как сконструировать другие "искусственные" типы курсора. <p> Средний уровень. <p> Ассемблерные программы оставляют курсор включенным, до тех пор, пока им не указано обратное. Операционная система не предоставляет специальных средств выключения курсора, но это легко сделать. Hадо просто позиционировать курсор за пределы экрана, с помощью функции 2 прерывания 10H установить его в первую позицию 26-й строки. Помните, что координаты отсчитываются от нуля, так что этой позиции соответствуют координаты 25,0. <table align="center"> <tr><td>MOV BH,0 </td><td>;номер страницы (всегда 0 для монохромного)</td></tr> <tr><td>MOV DH,25 </td><td>;строка</td></tr> <tr><td>MOV DL,0 </td><td>;столбец</td></tr> <tr><td>MOV AH,2 </td><td>;номер функции</td></tr> <tr><td>INT 10H </td><td>;устанавливаем курсор за пределы экрана</td></tr> </table> <p> Hизкий уровень. <p> Бит 6 регистра 10 микросхемы 6845 {<a href="411.htm">4.1.1</a>} выключает курсор, когда он установлен в 1, и включает его, когда сброшен в 0. Этот регистр содержит также значение "начальной строки" для курсора, которое вместе со значением "конечной строки" определяет толщину курсора {<a href="424.htm">4.2.4</a>}. Поскольку тип курсора не имеет значения, когда курсор выключен, то надо просто поместить в регистр 10 значение 32, чтобы установить бит 6. Чтобы восстановить курсор Вы должны также вернуть значение "начальной строки" курсора. Для нормального курсора это значение равно 11. Значение "конечной строки" при этих процедурах не меняется, поскольку оно хранится в другом регистре. <table align="center"> ;---выключение курсора <tr><td>MOV DX,3B4H </td><td>;номер порта адресного регистра 6845</td></tr> <tr><td>MOV AL,10 </td><td>;выбор регистра 10</td></tr> <tr><td>OUT DX,AL </td><td>;посылаем запрос</td></tr> <tr><td>INC DX </td><td>;доступ к регистру через следующий порт</td></tr> <tr><td>MOV AL,32 </td><td>;устанавливаем бит 6 для выключения курсора</td></tr> <tr><td>OUT DX,AL </td><td>;выключаем курсор</td></tr> <tr><td></td><td>;---обратное включение курсора</td></tr> <tr><td>MOV AL,11 </td><td>;значение "начальной строки"</td></tr> <tr><td>OUT DX,AL </td><td>;включаем курсор</td></tr> </table> <hr><p align="center">
<~-<a href="422.htm">4.2.2 Относительное позиционирование курсора</a><br><a href="index.htm#header">Содержание</a><br><a href="424.htm">4.2.4 Изменение формы курсора.</a>-~>
</p></body></html>
