<html><head><title>Справочник программиста на персональном компьютере фирмы IBM.Роберт Журден</title> <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> <link rel=stylesheet type=text/css href=style.css> </head><body> <p class="hdr1">Глава 5. Дисковые накопители.</p> <p class="hdr2">Раздел 4. Чтение и запись файла.</p> <p class="hdr3">5.4.7 Проверка данных после операций чтения/записи.</p> <p> MS DOS может проверять правильность производимого обмена с диском прямо во время обмена. Ошибки происходят настолько редко, что средства проверки обычно не используются, чтобы не замедлять обмен с диском. Однако, если это необходимо, то имеется два способа проверки. Один состоит во включении команды VERIFY = ON в файл CONFIG.SYS, который автоматически читается при загрузке операционной системы. Впоследствии, все дисковые операции будут проверяться. Это единственный способ проверки доступный в Бейсике. Второй метод состоит использовании специальной функции DOS для верификации только критических дисковых операций. Если процедура верификации обнаруживает ошибку, то она сообщает об условии критической ошибки, как описано в {<a href="725.htm">7.2.5</a>}. <p> Средний уровень. <p> Функция 2EH прерывания 21H включает и выключает проверку. Поместите в AL 1 - для включения верификации и 0 - для выключения. DL также должно быть равно 0. Затем надо выполнить прерывание. У этой функции нет выходных регистров. <table align="center"> <tr><td></td><td>;---включение верификации</td></tr> <tr><td>MOV AL,1 </td><td>;номер кода</td></tr> <tr><td>MOV DL,0 </td><td>;необходимый входной регистр</td></tr> <tr><td>MOV AH,2EH </td><td>;номер функции</td></tr> <tr><td>INT 21H </td><td>;включаем проверку</td></tr> </table> <p> Для определения текущего режима верификации надо вызвать функцию 54H прерывания 21H. У нее нет входных регистров. При возврате AL = 1, если проверка включена и AL = 0, если выключена. <hr><p align="center">
<~-<a href="546.htm">5.4.6 Чтение из файлов прямого доступа.</a><br><a href="index.htm#header">Содержание</a><br><a href="548.htm">5.4.8 Определение дисковых ошибок и восстановление после них.</a>-~>
</p></body></html>
