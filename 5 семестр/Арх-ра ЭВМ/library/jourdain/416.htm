<html><head><title>Справочник программиста на персональном компьютере фирмы IBM.Роберт Журден</title> <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> <link rel=stylesheet type=text/css href=style.css> </head><body> <p class="hdr1">Глава 4. Вывод на терминал.</p> <p class="hdr2">Раздел 1. Управление выводом на терминал.</p> <p class="hdr3">4.1.6 Переключение между видеоадапторами.</p> <p> Машина может быть оснащена и монохромным и цветным адаптором, или одним из этих адапторов и EGA. Программа может выбирать, какой из мониторов должен быть активным, изменяя значения битов 4 и 5 в ячейке памяти 0000:0410. Установив оба этих бита в 1 мы выбираем монохромный адаптор. Изменив установку битов 5-4 на 10 устанавливаем графический адаптор в режиме 80 символов в строке, а на 01 - 40 символов в строке. И, наконец, изменив биты на 00, выбираем EGA. Во всех случаях Вы должны немедленно подать команду установки режима, поскольку BIOS имеет еще очень много регистров, которые надо изменить, прежде чем дисплей будет работать нормально. <p> Отметим, что хотя операционная система не может управлять одновременно двумя мониторами, программы могут осуществлять вывод на оба дисплея, используя прямое отображение в память {<a href="431.htm">4.3.1</a>} для адресов буфера неактивного монитора. <p> Hизкий уровень. <p> В ассемблере, как и в Бейсике, надо прямо изменить биты 4 и 5 по адресу 0000:0410. Hадо сбросить режим дисплея сразу вслед за изменением. <table align="center"> <tr><td></td><td>;---переключение на монохромный монитор</td></tr> <tr><td>SUB AX,AX </td><td>;обнуляем AX </td></tr> <tr><td>MOV ES,AX </td><td>;устанавливаем ES на начало памяти</td></tr> <tr><td>MOV DL,ES:[410H] </td><td>;получаем байт по адресу 0000:0410</td></tr> <tr><td>OR DL,00110000B </td><td>;устанавливаем биты 4 и 5</td></tr> <tr><td>MOV ES:[410H],DL </td><td>;возвращаем байт</td></tr> <tr><td>MOV AH,0 </td><td>;фукция установки режима дисплея</td></tr> <tr><td>MOV AL,0 </td><td>;монохромный режим 80*25</td></tr> <tr><td>INT 10H </td><td>;устанавливаем режим</td></tr> <tr><td></td><td></td></tr> <tr><td></td><td>;---переключение на цветной монитор (40 символов)</td></tr> <tr><td>SUB AX,AX </td><td>;устанавливаем ES на начало памяти</td></tr> <tr><td>MOV ES,AX </td><td>; </td></tr> <tr><td>MOV DL,ES:[410H] </td><td>;берем байт по адресу 0000:0410</td></tr> <tr><td>AND DL,11001111B </td><td>;сбрасываем биты 4 и 5</td></tr> <tr><td>OR DL,00010000B </td><td>;устанавливаем бит 4</td></tr> <tr><td>MOV ES:[410H],DL </td><td>;возвращаем байт</td></tr> <tr><td>MOV AH,0 </td><td>;функция установки режима дисплея</td></tr> <tr><td>MOV AL,1 </td><td>;цветной режим 40*25</td></tr> <tr><td>INT 10H </td><td>;устанавливаем режим</td></tr> <tr><td></td><td></td></tr> <tr><td></td><td>;---переключение на EGA</td></tr> <tr><td>SUB AX,AX </td><td>;устанавливаем ES на начало памяти</td></tr> <tr><td>MOV ES,AX </td><td>;</td></tr> <tr><td>MOV DL,ES:[410H] </td><td>;берем байт по адресу 0000:0410</td></tr> <tr><td>AND DL,11001111B </td><td>;сбрасываем биты 4 и 5</td></tr> <tr><td>MOV ES:[410H],DL </td><td>;возвращаем байт</td></tr> <tr><td>MOV AH,0 </td><td>;функция установки режима дисплея</td></tr> <tr><td>MOV AL,1 </td><td>;цветной режим 40*25</td></tr> <tr><td>INT 10H </td><td>;устанавливаем режим</td></tr> </table> <hr><p align="center">
<~-<a href="415.htm">4.1.5 Очистка части/всего экрана.</a><br><a href="index.htm#header">Содержание</a><br><a href="420.htm">Раздел 2. Управление курсором.</a>-~>
</p></body></html>
