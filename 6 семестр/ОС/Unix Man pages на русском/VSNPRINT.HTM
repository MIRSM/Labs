<html>
<head>
<title>PRINTF(3S)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>
<h3 align=center>PRINTF(3S)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
printf, fprintf, sprintf, snprintf, asprintf, vprintf,
vfprintf, vsprintf, vsnprintf, vasprintf  -  вывод  с  
преобразованием по формату
<p><b>СИНТАКСИС</b>
<pre>
	#include &lt;stdio.h>
	
	int printf (format, val ...)
	char *format;
	
	int fprintf (stream, format, val ...)
	FILE *stream;
	char *format;
	
	int sprintf (s, format [, val] ...)
	char *s, *format;
	
	int
	snprintf(char *str, size_tsize, const char *format, ...)
	
	int
	asprintf(char **ret, const char *format, ...)
	
	#include &lt;stdarg.h>
	
	int
	vprintf(const char *format, va_list ap)
	
	int
	vfprintf(FILE *stream, const char *format, va_list ap)
	
	int
	vsprintf(char *str, char *format, va_list ap)
	
	int
	vsnprintf(char *str, size_t size, const char *format, va_list ap)
	
	int
	vasprintf(char **ret, const char *format, va_list ap)
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Функция  printf  направляет  данные в стандартный поток
вывода stdin. Функция fprintf направляет данные в поток
вывода, заданный  аргументом  stream.  Функция  sprintf
направляет   данные,  заканчивающиеся  пустым  символом
(\0), в массив s; пользователь  должен  позаботиться  о
выделении  достаточного  количества памяти для массива.
Каждая функция возвращает число переданных символов (не
считая пустого в  случае  sprintf),  или  отрицательное
число, если при выводе обнаружилась ошибка.
<p align=justify>Каждая из перечисленных функций преобразует, форматирует и печатает выводимые значения  val  под  управлением
формата,  заданного аргументом format. Формат - это цепочка  символов,  содержащая  об екты  двух  категорий:
обычные  символы,  которые просто копируются в выходной
поток, и спецификаторы преобразований, каждому из которых соответствует одно, несколько или ни одного из  выводимых  значений. Если выводимых значений val недостаточно, результат непредсказуем; если их слишком  много,
избыточные игнорируются.
<p align=justify>Каждый спецификатор преобразования начинается  символом
%, после которого последовательно записываются:
<ol>
<li> Флаги  (один,  несколько  или  ни одного), которые
уточняют смысл спецификации преобразования.
<li> Необязательная последовательность десятичных цифр,
задающая минимальную ширину поля, в котором  изображается  результат преобразования. Если результат
может быть изображен меньшим количеством символов,
то поле дополняется слева (или справа, если  задан
флаг  выравнивания  по левой границе) пробелами до
минимальной ширины; если последовательность, задающая ширину поля, начинается нулем, то для  дополнения используются нули.
<li> Точность,  задающая  минимальное количество цифр в
изображении результата преобразования типа  d,  i,
o, u, x, X, количество цифр после десятичной точки
в изображении результата преобразования типа e, E,
f, максимальное количество значащих цифр в изображении  результата  преобразования  типа  g, G, или
максимальное количество символов в изображении результата преобразования типа s. Точность записывается в виде точки (.), за которой следует несколько десятичных цифр; отсутствие цифр  интерпретируется  как  ноль.  Дополнение результата символами,
обусловленное  точностью,  подавляет   дополнение,
обусловленное шириной поля.
<li> Необязательный символ l, означающий, что относящиеся  к нему преобразования d, i, o, u, x, X применяются к целым выводимым значениям типа long.  Для
остальных преобразований символ l игнорируется.
<li> Символ, обозначающий тип преобразования.
</ol>
<p align=justify>Вместо  последовательности  цифр ширину поля и точность
можно обозначить звездочкой. Это означает,  что  в  качестве  ширины  поля  (или точности) используется целое
значение val из списка аргументов; оно должно предшествовать соответствующему выводимому значению. Если  значение,  задающее ширину поля, отрицательно, то считается, что задан флаг -, а в качестве ширины поля  берется
абсолютная  величина значения. Если отрицательно значение, задающее точность, она принимается равной нулю.
<p align=justify>Флаги и их смысл:
<table>
<tr valign=top><th>- <td>   Выравнивание результата  преобразования  по  левой
границе.
<tr valign=top><th>+ <td>   Обязательное  изображение знака (для чисел со знаком).
<tr valign=top><th>пробел <td>
Если  первый  символ  результата преобразования со
знаком отличен от + и -, то изображение результата
предваряется пробелом. Тем самым флаг + аннулирует
действие флага пробел.
<tr valign=top><th>#  <td>  Этот флаг означает, что значение  преобразуется  к
"альтернативной  форме".  Для преобразований c, d,
i, s, u этот флаг не имеет значения. Для  преобразования  типа o результат изображается с увеличенной точностью, с тем чтобы первая цифра результата
была нулем. Для преобразований типа x, X ненулевой
результат будет изображаться с  префиксом  0x  или
0X.  Для преобразований типа e, E, f, g, G результат обязательно изобразится с  десятичной  точкой,
даже  если  за  ней  нет цифр (обычно точка в этом
случае опускается). Для преобразований g, G не подавляются незначащие хвостовые  нули  (что  обычно
делается).
</table>
<p align=justify>Символы, обозначающие тип преобразования, и их смысл:
<table>
<tr valign=top><th>d, i, o, u, x, X <td>
Целое  выводимое значение преобразуется в десятичное со знаком  (d,  i),  беззнаковое  восьмеричное
(o),  десятичное (u) или шестнадцатеричное (x, X);
буквы abcdef  изображают  шестнадцатеричные  цифры
при  преобразовании x, а ABCDEF - при преобразовании X. Точность задает минимальное количество цифр
в изображении  результата;  если  результат  можно
изобразить  меньшим количеством цифр, то слева добавляются незначащие нули.  Значение  точности  по
умолчанию равно 1. Результат преобразования нуля с
нулевой точностью - пустая цепочка.
<tr valign=top><th>f  <td>  Выводимое значение типов float или double преобразуется в десятичное число и  изображается  в  виде
[-]ddd.ddd, где число цифр после точки определяется точностью. Если точность опущена, то считается,
что  она  равна 6; если точность равна нулю, точка
не печатается.
<tr valign=top><th>e, E <td>Выводимое значение типов float или double преобразуется в десятичное число и  изображается  в  виде
[-]d.ddde+/-dd,  где  перед точкой находится ровно
одна цифра, а число цифр после точки  определяется
точностью;  по  умолчанию  точность  равна 6; если
точность равна нулю, точка не печатается. Спецификация E отличается от e только обозначением порядка (E вместо e). Порядок всегда содержит по  крайней мере две цифры.
<tr valign=top><th>g, G<td> Выводимое значение типов float или double преобразуется  в  десятичное  число и изображается либо в
формате f, либо в формате e (или  E,  если  задана
спецификация G); точность определяется числом значащих  цифр.  Вид  изображения зависит от значения
аргумента: вид e используется только в том случае,
если порядок меньше -4 или больше значения точности. Хвостовые незначащие нули  подавляются;  десятичная  точка  печатается, только если за ней есть
цифры.
<tr valign=top><th>c  <td>  Печатается значение-символ.
<tr valign=top><th>s <td>   Выводимое  значение, заданное указателем, рассматривается как цепочка символов, ограниченная пустым
символом (\0); печать цепочки прекращается либо по
ограничителю, либо после вывода количества  символов,  равного значению точности. По умолчанию точность считается бесконечно большой; в этом  случае
цепочка  печатается до тех пор, пока не встретится
ограничитель. Пустой указатель  (NULL)  дает  непредсказуемые результаты.
<tr valign=top><th>% <td>   Печать символа %; выводимых значений не требуется.
</table>
<p align=justify>Если порядок вещественного числа точкой равен 0x7FF, то
число изображается в виде
<pre>
	[-]NaN0xdddddddd
</pre>
где 0xdddddddd - шестнадцатеричное представление  старших 32 бит мантиссы.
<p align=justify>Изображение результата никогда не усекается до заданной
ширины поля; если результат не помещается  в  поле,  то
оно расширяется до требуемой величины. Функции printf и
fprintf  выдают  символы  так,  как  если бы вызывалась
функция <a href=PUTC.htm>putc(3S)</a>.
<p align=justify><b>ПРИМЕРЫ </b><br>
<ol>
<li> Программа, печатающая свой текст  (она  должна  быть
набрана на одной строке):
<pre>
	char*t="char*t=%c%s%c;main(){char q=%d;
	printf(t,q,t,q,q);}";
	main(){char q=34;printf(t,q,t,q,q);}
</pre>
<p align=justify>Разобраться  в этой программе предоставляется читателю.
Отметим только, что в обращении к функции printf первое
вхождение t задает  формат,  а  второе  трактуется  как
обычное выводимое значение. Формат содержит как обычные
символы,  которые выводятся без изменений, так и спецификаторы преобразований.
<li> Напечатать число "pi" с пятью десятичными знаками:
<pre>
	printf("pi = %.5f", 4*atan(1.0));
</pre>
</ol>
<p><b>СМ. ТАКЖЕ</b><br>
<a href=ECVT.htm>ecvt(3C)</a>, <a href=PUTC.htm>putc(3S)</a>, <a href=SCANF.htm>scanf(3S)</a>, <a href=STDIO.htm>stdio(3S)</a>.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>