<html>
<head>
<title>SORT(1)  </title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>SORT(1)  </h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
sort - сортировка и/или слияние файлов
<p><b>СИНТАКСИС</b>
<pre>
	sort  [-c] [-m] [-u] [-o выходной_файл] [-yкилобайт] [-zдлина]
	      [-d] [-f] [-i] [-M] [-n] [-r] [-b] [-tразделитель]
	      [+позиция_1 [-позиция_2]] [файл ...]
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Команда sort сортирует строки, входящие во все исходные
файлы, и выдает результат на  стандартный  вывод.  Если
имена файлов не указаны, или в качестве файла указан -,
исходная информация поступает со стандартного ввода.
<p align=justify>При упорядочении используется один или несколько ключей
сортировки, выделяемых из каждой  вводимой  строки.  По
умолчанию ключ сортировки один - вся строка, а  порядок
является лексикографическим,  соответствующим  принятой
кодировке символов.
<p align=justify>Следующие опции изменяют стандартный порядок работы:
<dl>
<dt>-c <dd> Проверить,  является  ли  (единственный)  исходный
файл уже отсортированным. На стандартный вывод ничего не выдается. В стандартный протокол выводится
соответствующее сообщение только в случае  нарушения упорядоченности строк.
<p><dt>-m  <dd> Только слияние исходных файлов, которые  предполагаются отсортированными.
<p><dt>-u <dd>  Опция уникальности: из всех совпадающих строк  выводить только одну.
<p><dt>-o выходной_файл <dd>
Результат направляется не на стандартный вывод,  а
в выходной_файл, который может совпадать  с  одним
из исходных.
<p><dt>-yкилобайт <dd>
Количество дополнительной памяти, используемой командой sort, существенно влияет на скорость ее работы. Если опция -y отсутствует, sort начинает работу, используя область  памяти  некоторого  стандартного размера, а в случае необходимости  запрашивает дополнительную память. Если опция -y задана
с аргументом, команда sort  начинает  работу,  используя  указанное  число  килобайт  памяти,  если
только не нарушены ограничения сверху или снизу; в
этом случае используется  соответствующее  крайнее
значение. Таким образом, указание -y0  гарантирует
использование минимального об ема памяти. Опция -y
без аргумента задает область памяти  максимального
размера.
<p><dt>-zдлина <dd>
Во  время  сортировки  запоминается  размер  самой
длинной строки, так что для фазы  слияния  команда
sort может отвести буфер нужного размера. Если,  в
силу действия опций -c  или  -m,  фаза  сортировки
пропускается, используется  некоторый  стандартный
размер. Наличие строк, превышающих по длине буфер,
приводит к аварийному завершению команды.  Задание
заведомо достаточной длины гарантирует  нормальное
выполнение слияния.
</dl>
<p align=justify>Следующие опции позволяют выбрать нужный способ сравнения:
<dl>
<dt>-d  <dd> "Словарный" порядок: при сравнении являются значимыми только буквы, цифры, пробелы и знаки  табуляции.
<p><dt>-f <dd>  Преобразовывать малые буквы в большие.
<p><dt>-i   При нечисловых сравнениях игнорировать  символы  с
(восьмеричными) кодами,  не  лежащими  в  пределах
040-0176.
<p><dt>-M  <dd> Сравнивать как месяца. Первые три символа,  отличные  от  пробела,  сравниваются таким образом, что
"JAN" &lt; "FEB" &lt; ... &lt; "DEC" (малые буквы  преобразуются  в большие). Остальные трехсимвольные сочетания считаются меньшими,  чем  "JAN".  Эта  опция
включает опцию -b (см. ниже).
<p><dt>-n <dd>  Числовое сравнение. Начальные пробелы отбрасываются,  затем  цифровые  цепочки символов, содержащие
быть может знак минус и десятичную точку,  сравниваются как числа. Эта опция включает опцию -b (см.
ниже).  Отметим,  что опция -b действует только на
ключи сортировки с наложенными ограничениями.
<p><dt>-r  <dd> Заменить результат сравнения на противоположный.
</dl>
<p align=justify>Если опции, задающие способ сравнения, указаны до ограничений на ключи сортировки, то  они  применяются  глобально  ко  всем  ключам. Если же соответствующие флаги
ассоциированы с определенными ключами  сортировки  (см.
ниже), они воздействуют только на "свои" ключи.
<p align=justify>Полем называется минимальная последовательность  символов, за которой следует разделитель полей  или  перевод
строки. По  умолчанию  символом-разделителем  считается
пробел или символ табуляции. Пробелы и табуляции  сразу
вслед за разделителем (если они есть) принадлежат  следующему полю. Все пробелы в начале строки входят в первое поле. На трактовку  разделителей  влияют  следующие
опции:
<dl>
<dt>-b <dd>  Игнорировать начальные пробелы при определении начала и конца ключей сортировки. Если опция -b указана   перед  первым  аргументом  +позиция_1,  она
действует на все ключи с наложенными  ограничениями.  Флаг  b  можно связать и с отдельными ключами
сортировки (см. ниже).
<p><dt>-tразделитель <dd>
Использовать заданный символ как разделитель полей.
Разделитель не является частью поля (хотя и  может
входить в ключ сортировки). Каждое вхождение  разделителя является значимым, то есть два рядом стоящих разделителя ограничивают пустое поле.
</dl>
<p align=justify>При наложении ограничения на ключ сортировки указывается позиция начала ключа (+позиция_1) и позиция сразу за
концом ключа (-позиция_2). Если  опция  -позиция_2  отсутствует, ключ занимает весь остаток строки.
<p align=justify>Позиция_1 и позиция_2 задаются как пара m.n,  возможно,
с последующими флагами bdfiMnr. Начальная позиция задается как +m.n, что означает (n+1)-ый символ в  (m+1)-ом
поле (поля и символы нумеруются с единицы).  Отсутствие
.n означает .0, то есть первый  символ  (m+1)-го  поля.
Если указан флаг b, то n отсчитывается от первого  непробела в (m+1)-ом поле; +m.0b означает первый  непробел
в (m+1)-ом поле.
<p align=justify>Позиция за концом ключа записывается как -m.n, что  означает (n+1)-ый символ (включая разделители) после последнего символа m-го поля. Если .n опущено, то подразумевается .0, то есть разделитель после m-го поля.  Если
указан флаг b, то n отсчитывается от первого  непробела
в (m+1)-ом поле.
<p align=justify>Если указано  несколько  ключей  сортировки,  то  более
поздние используются только в  случае  равенства  более
ранних. Если значения ключей сортировки двух строк совпадают, строки упорядочиваются с учетом всех символов.
<p><b>ПРИМЕРЫ</b>
<ol>
<li> Отсортировать  файл  f1, используя в качестве ключа
второе поле:
<pre>
	sort  +1 -2 f1
</pre>
<li> Отсортировать по убыванию содержимое файлов f2 и f3,
поместив результат в файл f4. Ключом сортировки  служит
первый символ второго поля:
<pre>
	sort  -r -o f4 +1.0 -1.2 f2 f3
</pre>
<li> Отсортировать по убыванию содержимое файлов f5 и f6.
Ключом сортировки служит первый непробел второго поля:
<pre>
	sort  -r +1.0b -1.1b f5 f6
</pre>
<li> Распечатать файл паролей [см. <a href=PASSWD.htm>passwd(4)</a>], отсортировав его по числовым значениям идентификаторов пользователей (третье поле, поля разделяются символом :):
<pre>
	sort  -t: +2n -3 /etc/passwd
</pre>
<li> Распечатать  строки  уже отсортированного файла f7,
выводя лишь первую из строк с одинаковыми третьими  полями:
<pre>
	sort  -um +2 -3 f7
</pre>
</ol>
<p><b>ФАЙЛЫ</b>
<pre>
	/usr/tmp/stm???
</pre>
<p><b>СМ. ТАКЖЕ</b><br>
<a href=COMM.htm>comm(1)</a>, <a href=JOIN.htm>join(1)</a>, <a href=UNIQ.htm>uniq(1)</a>.
<p align=justify><b>ДИАГНОСТИКА</b><br>
При возникновении различных  ошибок  (например,  строка
слишком длинная) и при  обнаружении  нарушений  порядка
при запуске с опцией -c в стандартный протокол выдается
соответствующее сообщение и  сортировка  завершается  с
ненулевым кодом.
<p align=justify>Если в последней строке файла пропущен символ  возврата
каретки, то он добавляется автоматически, о чем выдается предупреждение.
<p align=justify><b>ПРЕДОСТЕРЕЖЕНИЯ</b><br>
Не гарантируется сохранение порядка следования строк  с
равными ключами.
<p align=justify>Не оговаривается приоритет различных  способов  сравнения (например, числового и словарного),  поэтому  задавать комбинацию флагов dMn не имеет смысла.
<pre>
	/spellhist
                   "исторический" файл
	/usr/lib/spell/spellprog
                   программа
</pre>
<p><b>СМ. ТАКЖЕ</b><br>
deroff(1), <a href=SED.htm>sed(1)</a>, <a href=SORT.htm>sort(1)</a>, <a href=TEE.htm>tee(1)</a>.
eqn (1), tbl (1), troff (1) в руководстве  DOCUMENTER'S
WORKBENCH Software 2.0 Technical Discussion  and  Reference Manual.
<p align=justify><b>СЮРПРИЗЫ</b><br>
Эталонный список неполон; при новых  реализациях,  возможно, возникнет желание несколько месяцев обрабатывать
выход  системы,  чтобы  собрать  отдельные  добавления;
обычно они помещаются в отдельный файл, который  добавляется в хэшированный эталонный список через spellin.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
