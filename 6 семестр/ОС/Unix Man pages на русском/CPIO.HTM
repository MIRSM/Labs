<html>
<head>
<title>CPIO(1)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>CPIO(1)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
cpio  -  архивизация  и извлечение, а также копирование
файлов
<p><b>СИНТАКСИС</b>
<pre>
cpio  -o [-a] [-c] [-B] [-v]

cpio  -i [-B] [-c] [-d] [-m] [-r] [-t] [-u] [-v] [-f] [-s] [-S] [-b] [-6
  [шаблон ...]

cpio  -p [-a] [-d] [-l] [-m] [-u] [-v] каталог
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Команда cpio -o (архивизация)  читает  со  стандартного
ввода список маршрутных имен и копирует  эти  файлы  на
стандартный вывод вместе с маршрутными именами и информацией о файлах. Вывод дополняется до размера, кратного
512 байт.
<p align=justify>
Команда cpio -i (извлечение) выделяет  отдельные  файлы
из стандартного ввода, который, как предполагается, является результатом работы cpio -o.  Извлекаются  только
файлы, имена которых соответствуют хотя  бы  одному  из
указанных шаблонов, построенных по принятым  в  shell'е
правилам для генерации имен файлов. Символу / могут соответствовать в шаблоне метасимволы ?, *, и [...].  Может быть указано несколько шаблонов, а если не  указано
ни одного, то по умолчанию шаблоном будет  *  (то  есть
будут извлечены все файлы). Каждый шаблон  должен  быть
окружен двойными кавычками. Извлекаемые файлы создаются
и копируются в текущее дерево каталогов в  соответствии
с описанными ниже опциями. Режим доступа к файлу  будет
тем же, что при выполнении команды  cpio  -o.  Владелец
файла и группа будут взяты у текущего пользователя, если он не суперпользователь,  в  противном  случае  cpio
сохранит владельца и группу файла, которые он имел  при
выполнении команды cpio -o.
<p align=justify>
Если  команда cpio -i пытается создать уже существующий
файл, и время последней модификации у извлекаемого файла то же самое или более раннее, чем  у  существующего,
то  cpio выдает предупреждение и не изменяет существующий файл. (Используя опцию -u, можно добиться безусловной замены существующего файла, без учета времени  последней модификации.)
<p align=justify>
Команда cpio -p (копирование)  читает  со  стандартного
ввода список маршрутных имен и, в соответствии с опциями командной строки, копирует заданные файлы  в  дерево
каталогов с указанным корневым каталогом.
<p>
Опциям команды cpio приписан следующий смысл:
<table>
<tr valign=top><td>-a<td>Не изменять время последнего доступа  к  исходному
файлу при его копировании.</tr>
<tr valign=top><td>-B<td>Установить  размер блока равным 5120 байт. Эта опция не применяется с  опцией  -p  и  имеет  смысл,
только  если  ввод/вывод происходит на специальное
символьное устройство (например /dev/mt).</tr>
<tr valign=top><td>-d<td>Создавать каталоги в случае необходимости.</tr>
<tr valign=top><td>-c<td>Заголовки файлов записывать в виде ASCII-символов.
Настоятельно рекомендуется использовать эту опцию,
если файлы переносятся на компьютер другого типа.</tr>
<tr valign=top><td>-r<td>Интерактивно переименовывать  файлы.  Для  каждого
извлекаемого  файла  у  пользователя запрашивается
новое имя,  а  если  пользователь  ответил  пустой
строкой, то файл пропускается. Опция не применяется с опцией -p.</tr>
<tr valign=top><td>-t<td>Вывести  оглавление архива, ранее созданного с помощью команды cpio. Никакие файлы не создаются.</tr>
<tr valign=top><td>-u<td>Безусловно заменять существующий файл  архивным  с
тем  же  именем  (обычно  старый  файл не заменяет
файл, изменявшийся позднее).</tr>
<tr valign=top><td>-v<td>Вывести список имен обработанных файлов. Если  использована  опция  -t,  то оглавление выглядит как
вывод команды ls -l [см. <a href=LS.htm>ls(1)</a>].</tr>
<tr valign=top><td>-l<td>Везде, где это возможно, не  копировать  файлы,  а
создавать ссылки. Эта опция употребляется только с
опцией -p.</tr>
<tr valign=top><td>-m<td>Сохранять  прежнее время последней модификации (то
есть то время, которое указано в заголовке файла).
При отсутствии этой опции время последней  модификации устанавливается равным текущему времени. Эта
опция  не действует на время последней модификации
скопированных каталогов. Заметим,  что  в  команде
cpio смысл опции -m противоположен ее смыслу в команде tar.</tr>
<tr valign=top><td>-f<td>Извлекать все файлы, кроме тех, имена которых  соответствуют шаблонам.</tr>
<tr valign=top><td>-s<td>Переставлять  байты  в  каждой половине слова. Эта
опция используется только с опцией -i.</tr>
<tr valign=top><td>-S<td>Переставлять половины слов в слове.  Предполагается,  что слово содержит четыре байта. Опция -S используется только с опцией -i.</tr>
<tr valign=top><td>-b<td>Порядок байт в слове изменять на  противоположный.
Используется только с опцией -i.</tr>
<tr valign=top><td>-6<td>Обрабатывать  старые  файлы.  Имеет смысл только с
опцией -i.</tr>
</table><p align=justify>
Если  в  процессе записи на специальное символьное устройство (опция -o) или чтения с него (опция -i) кончился физический  носитель  (например,  дискета),  команда
cpio выводит сообщение:
<pre>
If you want to go on, type device/file name when ready.
</pre><p align=justify>
Чтобы продолжить, Вы должны заменить носитель и  ввести
имя  специального  символьного  устройства   (например,
/dev/rdsk/fd) и символ возврат_каретки.  Можно  продолжить, указав для cpio другое устройство. Например, если
Вы имеете два дисковода для гибких дисков, можно указывать их по очереди, чтобы cpio выводил на другой дисковод, пока Вы будете менять дискету. (Один символ  возврат_каретки заставляет cpio окончить работу.)
<p align=justify><b>ПРИМЕРЫ</b><ol>
<li>Если стандартный ввод поступает в cpio -o через канал, то команда cpio группирует файлы, так что они  могут быть направлены (&gt;) в один файл (../newfile). Вместо ls Вы можете использовать команды find, echo, cat, и
т.д.,  чтобы подать список имен в cpio. Можно назначить
вывод на устройство, а не в файл.
<pre>
ls | cpio -o &gt;../newfile
</pre>
<li>Команда cpio -i использует выходной файл cpio -o  (в
данном примере направленный через канал  вывод  команды
cat), выбирает оттуда те файлы,  которые  соответствуют
шаблонам (memo/a1, memo/b*), создает каталоги, если это
нужно (опция -d), и помещает  файлы  в  соответствующие
каталоги. Если шаблоны не  указаны,  то  все  файлы  из
newfile будут размещены в текущем каталоге.
<pre>
cat newfile | cpio -id "memo/a1" "memo/b*"
</pre>
<li>Команда cpio -p берет имена файлов  и  копирует  эти
файлы в другой каталог (в примере newdir)  на  этом  же
компьютере или заводит на них еще  одну  ссылку  (опция
-l). Опция -d позволяет создавать новые каталоги в случае необходимости. Опция -m предписывает сохранить время последней модификации. (Очень важно использовать опцию -depth в команде find при генерации маршрутных имен
для cpio. Эта опция заставит  find  перечислять  файлы,
содержащиеся в каталоге, раньше чем сам каталог  и исключит ситуацию, когда cpio скопирует каталог, в который
по правам доступа нельзя писать, вместе с этим  правом,
а затем не сможет перенести в него файлы.)
<pre>
find . -depth -print | cpio -pdlmv newdir
</pre>
</ol>
<p align=justify><b>СМ. ТАКЖЕ</b><br>
<a href=AR.htm>ar(1)</a>, <a href=FIND.htm>find(1)</a>, <a href=LS.htm>ls(1)</a>, <a href=TAR.htm>tar(1)</a>.<br>
<a href=CPIO~1.htm>cpio(4)</a> в Справочнике программиста.
<p align=justify><b>ПРИМЕЧАНИЯ</b><br>
Маршрутные имена обрезаются до 256 символов.
<p align=justify>
Только суперпользователь может  копировать  специальные
файлы.
<p align=justify>
Количество блоков сообщается в предположении, что  размер блока равен 512 байт.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
