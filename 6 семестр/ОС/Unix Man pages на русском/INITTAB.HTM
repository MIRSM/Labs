<html>
<head>
<title>INITTAB(4)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>INITTAB(4)</h3>
<p><b>НАЗВАНИЕ</b><br>
inittab - схема процесса init
<p align=justify><b>ОПИСАНИЕ</b><br>
Файл  /etc/inittab  содержит  сценарий  для  исполнения
программой <a href=INIT.htm>init(1M)</a> роли главного диспетчера процессов.
Самым заметным  из  диспетчеризуемых  является  процесс
инициализации  терминальных  линий  /etc/getty.  Другие
примеры - демоны и shell.
<p align=justify>
Файл inittab состоит из строк, имеющих следующий формат
(важен и порядок строк):
<pre>
     имя:уровень_выполнения:действие:процесс
</pre><p align=justify>
Каждая  строка  оканчивается  символом перевода строки,
однако его экранирование посредством символа \ позволяет иметь строки продолжения. В любом случае длина строки не должна первышать 512 символов. В поле процесс могут  быть  включены   комментарии   согласно   правилам
shell'а. Комментарии к строкам, ответственным за запуск
процесса <a href=GETTY.htm>getty(1M)</a>, показываются командой <a href=WHO.htm>who(1)</a>. Предполагается, что в этих комментариях содержится информация  о линии, например дислокация соответствующего терминала. На количество строк в файле inittab не наложено
никаких ограничений (только на их  длину).  Поля  строк
имеют следующий смысл:
<dl>
<dt><b><i>имя</i></b>
<dd>Имя, состоящее из одного или двух символов, должно
однозначно идентифицировать строку.
<dt><b><i>уровень_выполнения</i></b>
<dd>Это  поле определяет уровень выполнения, при котором строка будет обрабатываться. Уровень  выполнения   непосредственно  соответствует  конфигурации
процессов в системе. Каждому процессу, запущенному
init'ом, присваивается уровень или уровни выполнения, при которых тот  может  существовать.  Уровни
выполнения  обозначаются цифрами от 0 до 6. Например, если система находится на уровне 1, то  будут
обработаны только строки, содержащие единицу в поле уровень_выполнения. Когда к init'у обращаются с
запросом  о  смене уровня выполнения, всем процессам, которые не должны существовать на новом уровне, посылается предупреждающий  сигнал  SIGTERM  и
дается  20  секунд на завершение, после чего "лишние" процессы принудительно терминируются сигналом
SIGKILL. Можно указать несколько допустимых  уровней  выполнения, если задать ряд цифр из диапазона
от 0 до 6. Если уровень_выполнения вообще не  указан,  то  считается, что процесс может выполняться
на любом уровне. Существует также три дополнительных значения, a, b и c, которые могут быть указаны
в данном поле, хотя они и  не  являются  реальными
уровнями  выполнения.  Строки  с такими значениями
уровня выполняются только по запросу процесса  telinit [см. <a href=INIT.htm>init(1M)</a>] независимо от текущего уровня
выполнения.  Отметим, что  уровни a, b, c не могут
быть установлены, а запрос на выполнение  помеченных ими процессов не меняет текущий уровень выполнения.  Кроме того, подобные процессы не уничтожаются при  смене  уровня  выполнения.  Уничтожаются
они,  только если соответствующие им строки содержат значение off в поле действие, если эти  строки
удаляются из файла /etc/inittab, или если init переходит в однопользовательский режим.
<dt><b><i>действие</i></b>
<dd>Ключевое слово в поле действие определяет  дисциплину обработки процесса, указанного в данной строке. Программа init распознает следующие действия:
<dl>
<dt><i>respawn</i>
<dd>Если процесс не существует, то  запустить  его,
не  ждать завершения (продолжать просмотр файла
inittab), после завершения процесса  перезапустить  его.  Если процесс уже существует, ничего
не делать и продолжать просмотр файла inittab.
<dt><i>wait</i>
<dd>При переходе на уровень_выполнения, совпадающий
с указанным в строке, запустить процесс и  ожидать его завершения. При всех последующих просмотрах  файла inittab на том же уровне выполнения игнорировать строку.
<dt><i>once</i>
<dd>При переходе на уровень_выполнения, совпадающий
с указанным в строке, запустить  процесс  и  не
ожидать его завершения. Когда процесс завершится,  не  перезапускать  его. Если уровень будет
изменен в момент, когда программа еще  выполняется  из-за предыдущей смены уровня выполнения,
то она не перезапускается.
<dt><i>boot</i>
<dd>Эта строка будет обработана только один раз  во
время  чтения init'ом файла inittab при начальной загрузке системы. Программа init  запускает
процесс и не ожидает его завершения. Когда процесс  завершится,  он не перезапускается. Чтобы
это действие выполнялось, поле уровень_выполнения  должно  быть  пустым  или  соответствовать
уровню  выполнения  процесса init во время загрузки  системы.  Спецификацией  boot   помечают
функции  инициализации, следующие за аппаратной
загрузкой системы.
<dt><i>bootwait</i>
<dd>Эта  строка будет обработана один раз при переходе init  из  однопользовательского  режима  в
многопользовательский  после  загрузки системы.
(Если действие initdefault соответствует уровню
выполнения 2, то указанный в строке процесс будет  запущен  сразу  после  загрузки  системы).
Программа  init  запускает  процесс, дожидается
его завершения и после этого  не  перезапускает
процесс.
<dt><i>powerfail</i>
<dd>Выполнять указанный в строке процесс только при
получении  init'ом  сигнала  об  ошибке питания
SIGPWR.
<dt><i>powerwait</i>
<dd>Выполнять указанный в строке процесс только при
получении init'ом  сигнала  об  ошибке  питания
SIGPWR  и  продолжать  обработку  файла inittab
лишь после завершения процесса.
<dt><i>off</i>
<dd>Если процесс, ассоциированный с данной строкой,
выполняется,   ему  посылается  предупреждающий
сигнал SIGTERM и дается 20 секунд  на  завершение,  после чего он принудительно терминируется
сигналом SIGKILL. Если процесс  не  существует,
строка игнорируется.
<dt><i>ondemand</i>
<dd>Это действие является синонимом respawn, но используется только со значениями a, b и c в поле
уровень_выполнения.
<dt><i>initdefault</i>
<dd>Строка, в которой указано это действие, используется только при первом обращении  к  процессу
init.  Она определяет уровень выполнения, устанавливаемый  первоначально:  выбирается  максимальная  из  цифр, указанных в поле уровень_выполнения. Если поле уровня пусто, оно  рассматривается как содержащее 0123456 и, следовательно,  устанавливается уровень выполнения 6. Если
в файле /etc/inittab  нет  строки  с  действием
initdefault,  то  начальное значение уровня выполнения запрашивается у пользователя в  момент
загрузки системы.
<dt><i>sysinit</i>
<dd>Строки  этого  типа  выполняются перед тем, как
init попытается получить доступ к  консоли  (то
есть перед выводом приглашения Console login:).
Обычно  подобные строки используются только для
инициализации устройств, с которых  init  может
попытаться запросить уровень выполнения. Команды из этих строк выполняются с ожиданием завершения.
</dl>
<dt><b><i>процесс</i></b>
<dd>Это команда shell'а, которую нужно выполнить.  Перед  содержимым поля вставляется exec и передается
shell'у в виде
<pre>
	sh  -c 'exec процесс'
</pre>
Тем самым в поле процесс может стоять любая конструкция, синтаксически корректная  с  точки  зрения
shell'а.  Чтобы употребить комментарий, нужно воспользоваться записью ;#комментарий.
</dl>
<p><b>СМ. ТАКЖЕ</b><br>
<a href=EXEC.htm>exec(2)</a>, <a href=FORK.htm>fork(2)</a>, <a href=OPEN.htm>open(2)</a>, <a href=SIGNAL.htm>signal(2)</a>.<br>
<a href=SH.htm>sh(1)</a>, <a href=WHO.htm>who(1)</a> в Справочнике пользователя.<br>
<a href=GETTY.htm>getty(1M)</a>, <a href=INIT.htm>init(1M)</a> в Справочнике администратора.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
