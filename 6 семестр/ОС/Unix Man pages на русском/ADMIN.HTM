<html>
<head>
<title>ADMIN(1)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>ADMIN(1)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
admin -   создание  и   административные   функции  для
SCCS-файлов
<p><b>СИНТАКСИС</b>
<pre>
  admin  [-n] [-i[файл]] [-rверсия] [-t[файл]] [-fфлаг[значение]]
  [-dфлаг[значение]] [-aпользователь] [-eпользователь]
  [-m[список_номеров_запросов_на_модификацию]] [-y[комментарий]]
  [-h] [-z] файл ...
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Команда admin используется для создания новых SCCS-файлов и изменения параметров существующих. Аргументы  admin, которые могут задаваться в любом порядке,  состоят
из опций и имен  файлов  (отметим,  что  простые  имена
SCCS-файлов должны начинаться с s.). Если поименованный
файл не существует, он создается, и его  характеристики
устанавливаются в соответствии с указанными  аргументами. Характеристикам, для которых не заданы соответствующие аргументы, присваиваются  значения  по  умолчанию.
Если поименованный файл существует, его характеристики,
соответствующие указанным аргументам, изменяются, а остальные остаются без изменений.
<p align=justify>
Если задано имя каталога, admin обрабатывает все  файлы
в этом каталоге, начинающиеся с s.;  файлы,  к  которым
нет доступа на чтение, игнорируются без  дополнительных
сообщений. Если задано  имя  -,  происходит  чтение  со
стандартного ввода, каждая строка при  этом  трактуется
как имя SCCS-файла, подлежащего  обработке.  Файлы,  не
начинающиеся с s., и файлы, к которым  нет  доступа  на
чтение, также игнорируются без  дополнительных  сообщений.
<p align=justify>
Каждая опция об ясняется ниже для одного обрабатываемого файла; при нескольких файлах она применяется к  каждому из них.
<table>
<tr valign=top><td>-n<td>Создать новый SCCS-файл</tr>
<tr valign=top><td>-i[файл]<td>
Текст для нового SCCS-файла  взять  из  указанного
файла.  Этот текст составляет начальную версию (по
поводу нумерации версий см. опцию  -r).  Если  используется опция -i, а файл не задан, текст берется со стандартного ввода, до достижения конца файла. Если опция -i отсутствует, SCCS-файл создается
пустым.  Командой  admin с опцией -i можно создать
только один файл, без опции -i можно создать  несколько (пустых) файлов. Опция -i подразумевает опцию -n.</tr>
<tr valign=top><td>-rверсия<td>
Номер  начальной версии файла. Эта опция используется совместно с опцией -i. Если  -r  отсутствует,
подразумевается версия 1. Уровень начальной версии
всегда  1,  то  есть по умолчанию начальная версия
получает имя 1.1.</tr>
<tr valign=top><td>-t[файл]<td>
Описание SCCS-файла взять из файла. Если опция  -t
используется при  создании  SCCS-файла  (опции  -n
и/или -i) файл с описанием обязателен. Для существующего файла: (1) опция -t без имени файла приводит к удалению описания SCCS-файла, (2) опция -t с
именем файла приводит к замене существующего  описания SCCS-файла на новое, содержащееся в файле.</tr>
<tr valign=top><td>-fфлаг[значение]<td>
Эта опция определяет флаг, и,  возможно,  значение
флага, который помещается в SCCS-файл. В одной команде admin могут указываться несколько опций  -f.
Допустимые флаги и их значения:
<dl>
<dt>b
<dd>Допустимость  использовать  опцию  -b   команды
<a href=GET.htm>get(1)</a> для создания ответвлений.
<dt>cверсия
<dd>Максимальная версия (до  9999),  которая  может
быть выбрана командой <a href=GET.htm>get(1)</a>  для  редактирования. Значение по умолчанию (если флаг c не указан) равно 9999.
<dt>fверсия
<dd>Минимальная версия  (до  9999),  которая  может
быть выбрана командой <a href=GET.htm>get(1)</a>  для  редактирования. Значение по умолчанию (если флаг f не указан) равно 1.
<dt>dс_идентификатор
<dd>Номер версии по умолчанию,  который  будет  использоваться командой <a href=GET.htm>get(1)</a>.
<dt>i
<dd>Приводит  к тому, что сообщение "No id keywords
(ge6)",  выдаваемое  программами   <a href=GET.htm>get(1)</a>   или
<a href=DELTA.htm>delta(1)</a>,  интерпретируется как фатальная ошибка. В отсутствие этого флага указанное  сообщение является предупреждением; оно выдается, если  в тексте, извлеченном из SCCS-файла или записанном в него,  не  оказалось  ключевых  слов
SCCS [см. <a href=GET.htm>get(1)</a>].
<dt>j
<dd>Допускается  использование  нескольких   команд
<a href=GET.htm>get(1)</a> одновременно для редактирования одной  и
той же версии SCCS-файла. Это позволяет вносить
параллельно несколько изменений в одну и ту  же
версию SCCS-файла.
<dt>lсписок
<dd>Список  версий, в которые запрещено вносить изменения (то есть команда get -e для этих  "закрытых"  версий завершается неудачей). Синтаксис
списка следующий:
<pre>
	список ::= элемент | список,элемент
	элемент ::= номер_версии | a
</pre>
Символ a означает все версии в SCCS-файле.
<dt>n
<dd>Приводит к тому, что <a href=DELTA.htm>delta(1)</a> при создании  новой  версии  будет создавать пустыми все пропущенные версии (например,  создавая  версию  5.1
после  версии 2.7, имеем пропущенные версии 3 и
4). Эти пустые версии могут затем быть  использованы  для  новых  ветвей.  Отсутствие флага n
приводит  к  отсутствию  пропущенных  версий  в
SCCS-файле, использовать их в будущем для новых
ветвей нельзя.
<dt>qтекст
<dd>Производится  подстановка  текста  вместо  всех
вхождений  %Q%  в  информацию,  извлеченную  из
SCCS-файла с помощью <a href=GET.htm>get(1)</a>.
<dt>mимя
<dd>Производится  подстановка  имени  вместо   всех
вхождений %M% в  тексте,  который  извлечен  из
SCCS-файла с помощью <a href=GET.htm>get(1)</a>.  Если  флаг  m  не
указан, вместо %M% подставляется имя  SCCS-файла, из которого удалены начальные s..
<dt>tтип
<dd>Производится подстановка типа вместо всех вхождений %Y%  в  тексте,  который  извлекается  из
SCCS-файла с помощью <a href=GET.htm>get(1)</a>.
<dt>v[программа]
<dd>Приводит к тому, что <a href=DELTA.htm>delta(1)</a> запрашивает в качестве причины создания версии номер запроса на
модификацию. Необязательный параметр  указывает
имя программы проверки корректности этого номера (см. <a href=DELTA.htm>delta(1)</a>). Если этот  флаг  указывается
при  создании  SCCS-файла,  обязательно  должна
быть указана опция -m, хотя бы с пустым  значением.
</dl></tr>
<tr valign=top><td>-dфлаг[значение]<td>
Приводит к удалению указанного флага из  SCCS-файла. Опция -d может быть указана только для существующих  SCCS-файлов.  В  одной команде admin можно
указать несколько опций -d. Допустимые флаги см. в
описании опции -f.</tr>
<tr valign=top><td>lсписок<td>
Список "закрытых" версий, которые  должны  быть
"открыты". Синтаксис списка см. в описании флага l опции -f.</tr>
<tr valign=top><td>-aпользователь<td>
Имя пользователя или числовой идентификатор группы
добавляется к списку пользователей, которые  имеют
право редактировать версии в SCCS-файле.  Указание
идентификатора группы эквивалентно  указанию  имен
всех пользователей, принадлежащих группе. В  одной
команде admin можно указать  несколько  опций  -a.
Количество имен  пользователей  и  идентификаторов
групп в списке имеющих доступ не ограничено.  Если
этот список пуст,  никто  не  может  редактировать
версии.</tr>
<tr valign=top><td>-eпользователь<td>
Имя пользователя или числовой идентификатор группы
удаляется из списка пользователей,  которые  имеют
право редактировать версии в SCCS-файле.  Указание
идентификатора группы эквивалентно  указанию  имен
всех пользователей, принадлежащих группе. В  одной
команде admin можно указать несколько опций -e.</tr>
<tr valign=top><td>-m[список_номеров_ запросов_на_модификацию]<td>
Список_номеров_запросов_на_модификацию  включается
в  SCCS-файл в качестве причины создания начальной
версии тем же способом, что  и  <a href=DELTA.htm>delta(1)</a>.  Флаг  v
должен быть установлен. Номера запроса проверяются
на  корректность,  если  флаг  v содержит значение
(имя программы проверки). Если флаг  v  не  указан
или программа проверки выявила некорректность, выдается диагностика.</tr>
<tr valign=top><td>-y[комментарий]<td>
Текст комментария вносится в SCCS-файл как комментарий к начальной версии, тем же способом,  что  и
<a href=DELTA.htm>delta(1)</a>. Опущенная опция -y приводит к  занесению
в файл стандартного комментария:
<pre>
	date and time created гг/мм/дд чч:мм:сс
	by пользователь
</pre>Опция -y может быть указана только совместно с опциями -i  и/или  -n  (то есть при создании  нового
SCCS-файла). Если комментарий больше одного слова,
он должен быть заключен в двойные кавычки.</tr>
<tr valign=top><td>-h<td>
Admin проверяет структуру SCCS-файла [см.  sccsfile(5)]  и сравнивает вновь вычисленную контрольную
сумму (сумму кодов  всех  символов  в  SCCS-файле,
кроме символов первой строки) с  контрольной  суммой, хранящейся в первой строке SCCS-файла.  Выдается соответствующая диагностика. Эта опция запрещает запись в файл, аннулирует все остальные опции
и имеет смысл только для существующих файлов.</tr>
<tr valign=top><td>-z<td>
Контрольная сумма SCCS-файла перевычисляется и записывается  в  первую  строку (см. выше опцию -h).
Использование этой опции для  поврежденного  файла
может привести к тому, что повреждение пройдет незамеченным.</tr>
</table>
<p align=justify><b>ФАЙЛЫ</b>
<br>
Простые имена SCCS-файлов должны иметь вид s.имя_файла.
Новые  SCCS-файлы  получают  права  доступа  444   [см.
<a href=CHMOD.htm>chmod(1)</a>]. Безусловно,  для  создания  файла  требуются
права записи в каталог. Всю запись admin производит  во
временный файл с именем x.имя_файла [см. <a href=GET.htm>get(1)</a>],  создаваемый с правами доступа 444 (если команда admin создает новый файл) или с теми же правами доступа,  что  и
существующий SCCS-файл. После успешного завершения  выполнения admin, старый SCCS-файл удаляется, а временный
переименовывается. Это гарантирует, что изменения  вносятся в SCCS-файл только при отсутствии ошибок.
<p align=justify>
Рекомендуется, чтобы все каталоги, содержащие SCCS-файлы, имели права доступа 755, а сами SCCS-файлы -  права
доступа 444. Указанные права для каталога позволяют модифицировать SCCS-файлы, находящиеся в каталоге, только
владельцу каталога. Права для SCCS-файлов предотвращают
модификацию этих файлов иначе, чем через команды SCCS.
<p align=justify>
Если все-таки по какой-либо причине потребуется модифицировать SCCS-файл, права доступа могут  быть  изменены
на 644, что позволит владельцу использовать для модификации редактор <a href=ED.htm>ed(1)</a>. Будьте осторожны  и  внимательны!
Модифицированный файл должен быть обязательно обработан
командой admin -h для проверки  корректности,  а  затем
admin -z для генерации  правильной  контрольной  суммы.
После этого рекомендуется еще раз выполнить команду admin -h для контроля нормального состояния SCCS-файла.
<p align=justify>
Admin также создает файл-замок z.имя_файла, который используется для предотвращения одновременного доступа  к
SCCS-файлу несколькими  пользователями.  Дополнительную
информацию см. в <a href=GET.htm>get(1)</a>.
<p align=justify><b>СМ. ТАКЖЕ</b><br>
<a href=DELTA.htm>delta(1)</a>, <a href=ED.htm>ed(1)</a>, <a href=GET.htm>get(1)</a>, <a href=HELP.htm>help(1)</a>, <a href=PRS.htm>prs(1)</a>, <a href=WHAT.htm>what(1)</a>.<br>
<a href=SCCSFILE.htm>sccsfile(4)</a> в Справочнике программиста.
<p align=justify><b>ДИАГНОСТИКА</b><br>
Для раз'яснений пользуйтесь командой <a href=HELP.htm>help(1)</a>.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
