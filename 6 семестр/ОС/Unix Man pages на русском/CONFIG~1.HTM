<html>
<head>
<title>CONFIG(8)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>CONFIG(8)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
config - конфигурирует систему UNIX.
<p><b>СИНТАКСИС</b>
<pre>
  /usr/sys/conf/config [-i] [-c file] [-s] -m master dfile
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
config считывает описание  системы UNIX и  формирует компилируемые
файлы, которые  определяют конфигурационные таблицы для  различных
устройств системы.
<p>
Опции:
<table>
<tr valign=top><td><b>-m</b><td>Задает имя файла, который содержит всю информацию в  отношении поддерживаемых устройств;  /usr/sys/conf/master -  стандартное имя.  Этот  файл  поставляется  вместе  с  системой XENIX и не должен   модифицироваться   пользователем.   Для   исправления /usr/sys/conf/master  и  dfile  следует  использовать  утилиту <a href=CONFIGUR.htm>configure(8)</a>.<tr>
<tr valign=top><td><b>-i</b><td>Требует ассемблерной выдачи вместо C-выдачи, устанавливаемой по умолчанию.<tr>
<tr valign=top><td><b>-c</b><td>Задает  имя  файла  конфигурационной  таблицы.  По   умолчанию используется  имя  c.c,  если  только  не  задана  опция -i, в последнем случае используется имя c.asm.<tr>
<tr valign=top><td><b>-s</b><td>Задает  имя  файла  параметров.  По умолчанию используется имя space.c; если задана опция -i, то используется имя space.inc.
</tr></table><p align=justify>
Файл dfile содержит информацию об устройствах системы и подразделяется
на  две  части.  В  первой  части  содержатся  спецификации физических
устройств,  а  во  второй  -  информация,  зависящая от системы. Любая
строка со звездочкой * в колонке 1 является комментарием.  Стандартный
поставляемый файл dfile носит  имя /usr/sys/conf/xenixconf.    Утилита
configure(ADM)   должна   использоваться    также   для    модификации
/usr/sys/conf/xenixconf.
<p align=justify>
Во  всех  конфигурациях  подразумевается  наличие определенного набора
устройств, таких как системные часы, которые должны присутствовать для
работы системы XENIX. Эти устройства задавать в файле dfile не надо.
<p align=justify><i>Первая часть файла dfile</i><br>
Каждая строка содержит два поля, разделенных пробелами и/или знаками
табуляции:
<pre>
  devname number
</pre><p align=justify>
где devname  - имя  устройства, а  number -  количество (в  десятичном
представлении)  устройств,  связанных  с соответствующим контроллером.
Имя устройства может быть любым  именем заданным в первой части  файла
/usr/sys/conf/master  или  любым  псевдонимом  в  части 3 этого файла;
число  number  является  необязательным,  и  если  оно  опущено, то по
умолчанию   устанавливается   максимальное   значение   для    данного
контроллера.
<p align=justify>
Существуют  некоторые  типы  драйверов,  которые могут быть поставлены
вместе с  системой и  которые являются  в действительности  драйверами
псевдо-устройств,  то  есть  с  драйвером  не  связывается   настоящее
аппаратное  средство.  Подобные  драйверы  описываются  в  разделе   M
Справвочника пользователя.
<p align=justify><i>Вторая часть файла dfile</i><br>
Вторая часть содержит три различных типа строк. Обратите внимание, что
все спецификации этой части обязательны, хотя порядок их следования  произволен.
<ol>
<li>Спецификация устройства root/pipe<br>
Здесь имеются две строки, в каждой из которых по три поля:
<pre>
  root  devname  minor
  pipe  devname  minor
</pre>
где devname  - имя  устройства, а  minor -  малое число  устройства (в
восьмиричном виде). Имя устройства может быть любым  именем заданным в
первой части  файла /usr/sys/conf/master   или  любым  псевдонимом   в
части 3 этого файла.
<li>Спецификация устройства swap<br>
Это - одна строка, содержащая пять полей:
<pre>
  swap  devname  minor  swplo    nswap
</pre>
где devname  - имя  устройства, а  minor -  малое число  устройства (в
восьмиричном виде), swplo - самый  первый блок на диске (в  десятичном
виде)  в  области  свопинга,  а  nswap  -  количество  блоков диска (в
десятичном виде) в области  свопинга. Имя устройства может  быть любым
именем заданным в первой  части  файла /usr/sys/conf/master  или любым
псевдонимом в части 3 этого файла.
<li>Спецификация parameter<br>
Это - одна или несколько строк, в каждой по два поля:
<pre>
  name   number
</pre>
где name -  имя параметра настройки,  а number -  желаемое значение (в
десятичном виде) данного параметра. Могут использоваться только имена,
определенные  в  части  4  файла  /usr/sys/conf/master;  число  number
перебивает установку данного  параметра, заданную по  умолчанию. Далее
приведен список допустимых параметров:
<dl>
<dt>buffers
<dd>Максимальное количество внешних (картированных) буферов, доступных  в ядре.  При установке  в 0 config  вычисляет  оптимальное  значение  этого параметра для системы.
<dt>sabufs
<dd>Максимальное количество внутренних (некартированных) доступных буферов.
<dt>hashbuf
<dd>Максимальное количество хэш-буферов.
<dt>inodes
<dd>Максимальное количество индексных дескрипторов файлов на одну файловую систему.
<dt>files
<dd>Максимальное количество открытых файлов на одну файловую систему.
<dt>mounts
<dd>Максимальное количество смонтированных файловых систем.
<dt>coremap
<dd>Максимальное количество статических элементов картирования.
<dt>swapmap
<dd>Максимальное количество динамических элементов картирования.
<dt>pages
<dd>Количество страниц памяти. На сегментированных системах, таких как 286-я система, это значение должно быть нулевым.
<dt>calls
<dd>Максимальное количество записей в таблице тайм-аутов.
<dt>procs
<dd>Максимальное количество процессов в одной системе.
<dt>maxproc
<dd>Максимальное количество процессов на одного пользователя.
<dt>texts
<dd>Максимальное количество текстовых сегментов в одной системе.
<dt>clists
<dd>Максимальное количество символьных списков в одной системе.
<dt>locks
<dd>Максимальное количество файловых блокировок в одной системе.
<dt>shdata
<dd>Максимальное количество сегментов общих данных в одной системе.
<dt>timezone
<dd>Разница в минутах между местным и гринвичским средним временем.
<dt>daylight
<dd>Время экономии дневного света: 1 - задействовано, 0 - незадействовано.
<dt>msgmap
<dd>Количество записей в таблице сообщений.
<dt>msgmax
<dd>Максимальный размер сообщения.
<dt>msgmnb
<dd>Максимальное количество байтов в очереди сообщений.
<dt>msgmni
<dd>Количество идентификаторов очереди сообщений.
<dt>msgtql
<dd>Количество заголовков сообщений в системе.
<dt>msgssz
<dd>Количество байтов в сегментах сообщений.
<dt>msgseg
<dd>Количество сегментов сообщений.
<dt>semmap
<dd>Количество записей в таблице семафоров.
<dt>semmni
<dd>Количество семафорных идентификаторов.
<dt>semmnu
<dd>Количество структур undo в системе.
<dt>semmsl
<dd>Максимальное количество семафоров на один идентификатор.
<dt>semopm
<dd>Максимальное количество операций за один вызов semop(S).
<dt>semume
<dd>Максимальное количество структур undo на один процесс.
<dt>semvmx
<dd>Максимальное значение семафора.
<dt>semaem
<dd>Максимальное значение "выравнивания при выходе"
<dt>semmns
<dd>Количество семафоров в системе.
<dt>cmask
<dd>Маска  создания   файла  для   процесса  0   по умолчанию.
<dt>maxprocmem
<dd>Максимальый объем памяти, доступной процессу.
<dt>screens
<dd>Количество экранов в многоэкранных системах.
<dt>emaps
<dd>Максимальное     количество     таблиц    явных восьмиразрядных каналов.
<dt>nodename
<dd>Имя дескриптора системы (используемое <a href=UUCP.htm>uucp(1)</a> и другими программами).
<dt>npbuf
<dd>Количество  физических  резервируемых   буферов ввода/вывода.
<dt>dmaexcl
<dd>Устанавливается  в  1,  если  только один канал DMA  (прямого  доступа  к  памяти)  может  быть использован одновременно, и  в 0 -  в противном случае.
<dt>sdslots
<dd>sdslots  *  shdata  -  максимальное  количество одновременных  обращений   к  сегментам   общей памяти для всей системы.
<dt>memlim
<dd>Процесс может занимать не более заданного  этим параметром  процента  пользовательской   памяти плюс  разрешенную  область  свопинга   (которая ограничивается   параметром    swplim).    Этот параметр действителен только для машин на  базе процессоров семейства 80286.
<dt>swplim
<dd>Процесс может занимать не более заданного  этим параметром  процента   области  свопинга   плюс разрешенную     область     памяти     (которая ограничивается   параметром    memlim).    Этот параметр действителен только для машин на  базе процессоров семейства 80286.
<dt>maxbuf
<dd>Максимально возможное количество кэш-буферов.
<dt>shless
<dd>Количество   сеансов   на   уровне   командного процессора.
<dt>shmmax
<dd>Максимальный  размер  сегмента  общей   памяти. Значение по умолчанию - 131072.
<dt>shmmin
<dd>Минимальный  размер   сегмента  общей   памяти. Значение по умолчанию - 1.
<dt>shmmni
<dd>Максимальное  количество  идентификаторов общей памяти во всей системе.
<dt>shmseg
<dd>Количество   присоединенных   сегментов   общей памяти на один процесс.
<dt>shmall
<dd>Максимальное      количество       одновременно используемых текстовых сегментов общей памяти.
<dt>nqueue
<dd>Количество очередей, задаваемых в  конфигурации пакета STREAMS.
<dt>nstream
<dd>Количество резервируемых структур - дескрипторов  потоков ("Stream-head" (stdata)).
<dt>nstrpush
<dd>Максимальное количество модулей, которое можно подать на поток.
<dt>nstrevent
<dd>Исходное количество резервируемых ячеек событий в потоке.
<dt>maxsepgcnt
<dd>Количество дополнительных страниц памяти, которые могут быть динамически зарезервированы для ячеек событий.
<dt>nmuxlink
<dd>Максимальное количество резервируемых мультиплексорных звеньев.
<dt>strmsgsz
<dd>Максимально допустимый размер области данных для любого сообщения в пакете STREAMS.
<dt>strctlsz
<dd>Максимально допустимый размер управляющей части любого сообщения в пакете STREAMS.
<dt>nblkn
<dd>Количество блоков данных и буферов в пакете STREAMS, резервируемое для каждого размерного класса (n).
<dt>strlofrac
<dd>Процент блоков данных для данного класса, для которого автоматически исключаются низкоприоритетные запросы на резервирование блоков.
<dt>strmedfrac
<dd>Процент срезания запросов на резервирование блоков со средним приоритетом (см. strlofrac выше).
<dt>evqueues
<dd>Максимальное количество открытых очередей событий во всей системе.
<dt>evdevs
<dd>Максимальное количество устройств, находящихся в очередях событий во всей системе.
<dt>evdevsperq
<dd>Максимальное количество устройств на одну очередь событий.
<dt>kbtype
<dd>Для клавиатур типа XT устанавливается в XT, а для клавиатур типа AT - в AT.
</dl></ol>
<p align=justify><b>ПРИМЕРЫ</b><br>
Предположим,  что  вы  хотите  установить  конфигурацию  системы со
следующими устройствами:
<ul>
<li>Один контроллер дисководов жестких дисков с одним дисководом.
<li>Один контроллер дисководов гибких дисков с одним дисководом.
</ul>
Вы должны задать также следующую информацию:
<p>
устройство корневой системы - жесткий диск (псевдо-диск 3)<br>
устройство конвейера - жесткий диск (псевдо-диск 3)<br>
устройство свопинга - жесткий диск (псевдо-диск 2) с параметрами swplo=0 и nswap=2300<br>
количество буферов - 50<br>
количество процессов - 50<br>
максимальное количество процессов на один пользовательский идентификатор - 15<br>
количество монтировок - 8<br>
количество файловых индексных дескрипторов - 120<br>
количество файлов - 120<br>
количество вызовов - 30<br>
количество текстов - 35<br>
количество символьных буферов - 150<br>
количество записей swapmap - 50<br>
количество страниц памяти - 512<br>
количество блокировок файлов - 100<br>
параметр timezone - зона Тихого океана<br>
время экономии дневного света - задействовано<br>
количество записей в таблице сообщений - 513<br>
максимальный размер сообщения - 8192<br>
максимальное количество байтов в очереди сообщений - 16384<br>
количество идентификаторов очередей сообщений - 10<br>
количество заголовков сообщений в системе - 40<br>
размер сегмента сообщений - 8<br>
количество сегментов сообщений - 1024<br>
количество записей в таблице семафоров - 21<br>
количество семафорных идентификаторов - 10<br>
количество структур undo в системе - 60<br>
максимальное количество семафоров на один идентификатор - 10<br>
максимальное количество операций за один вызов semop - 5<br>
максимальное количество записей undo на один процесс - 5<br>
максимальное значение семафора - 32767<br>
максимальное значение "выравнивания при выходе" - 16384<br>
количество семафоров в системе - 40
<p>
Действительная конфигурация системы должна быть задана в следующем
виде:
<pre>
hd             1
fd             1
root           hd       3
pipe           hd       3
swap           hd       2        0       2300
* Вот так могут быть вставлены комментарии
buffers        50
procs          150
maxproc        15
mounts         8
inodes         120
files          120
calls          30
texts          35
clists         150
swapmap                 50
pages          (1024/2)
locks          100
timezone                (8*60)
daylight       1
msgmap         (MSGSEG/2+1)
msgmax         8192
msgmnb         8192
msgmni         10
msgtql         40
msgssz         8
msgseg         1024
semmap         (SEMMNS/2+1)
semmni         10
semmnu         20
semmsl         10
semopm         5
semume         5
semvmx         32767
semaem         16384
semmns         40
</pre>
<p><b>ФАЙЛЫ</b>
<pre>
/usr.sys/conf/master таблица главного устройства ввода по умолчанию
c.c               файл конфигурационной таблицы драйвера вывода по умолчанию
space.c           файл конфигурационной таблицы источника выдачи по умолчанию
c.asm             конфигурация драйвера по умолчанию на ассемблере
space.inc         конфигурация источника по умолчанию на ассемблере
</pre>
<p><b>СМ. ТАКЖЕ</b><br>
<a href=CONFIGUR.htm>configure(8)</a>, master(3)
<p align=justify><b>ДИАГНОСТИКА</b><br>
Диагностика направляется на устройство стандартного вывода и
понятна сама по себе.
<p align=justify><b>ПРИМЕЧАНИЯ</b><br>
Значение  параметра  в  правой  части  его спецификации должно быть
строкой в двойных кавычках, целым числом, именем другого параметра,
определенного внутри файла master(3) или арифметическим выражением,
составленным из целых чисел и имен определенных параметров. В  этих
арифметических выражениях можно использовать только операторы  "+",
"-", "*" и "/". Эти выражения интерпретируются слева направо:  если
возникают сомнения в приоритете обработки операторов -  пользуйтесь
скобками.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
