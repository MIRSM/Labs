<html>
<head>
<title>TERM(4)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>TERM(4)</h3>
<p><b>НАЗВАНИЕ</b><br>
term - формат скомпилированного файла описаний терминалов
<p><b>СИНТАКСИС</b>
<pre>
/usr/lib/terminfo/?/*
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Скомпилированные  <a href=TERMINFO.htm>terminfo(4)</a> описания помещаются в каталог /usr/lib/terminfo. Чтобы предотвратить последовательный поиск в огромном каталоге, используется  двухуровневая  схема: /usr/lib/terminfo/с/имя, где имя - это
имя терминала, а с - первый символ имени. Так,  скомпилированное описание терминала att4425 находится в файле
/usr/lib/terminfo/a/att4425. Синонимы реализуются с помощью ссылок на один и тот же скомпилированный файл.
<p align=justify>
Формат  скомпилированных файлов выбран так, чтобы он не
зависел от оборудования. Считается, что байт содержит 8
бит, но не делается  никаких  предположений  о  порядке
байт  или  размножении  знака.  Таким образом, двоичные
файлы <a href=TERMINFO.htm>terminfo(4)</a> могут быть перенесены на любое оборудование, в котором байт содержит 8 бит.
<p align=justify>
Короткие  целые  числа записываются в двух восьмибитных
байтах. Первый байт содержит наименее  значимые  8  бит
значения,  второй  содержит наиболее значимые 8 бит (то
есть значение равно 256*второй_байт+первый_байт).  Значение -1 представляется в виде 0377,0377, значение -2 в  виде  0376,0377, остальные отрицательные числа недопустимы. На компьютерах, на которых эти  соглашения  не
соответствуют  оборудованию,  необходимо  читать  целые
числа как 2 байта, а затем вычислять значение,  обеспечивая таким образом переносимость скомпилированных файлов  на  разные  типы компьютеров. Значение, равное -1,
обычно означает, что указанная характеристика у  терминала  отсутствует.  Значение,  равное -2, означает, что
характеристика отменена в исходном описании <a href=TERMINFO.htm>terminfo(4)</a>
и считается отсутствующей.
<p align=justify>
Скомпилированный файл создается из исходных файлов описаний терминалов [см опцию -I в <a href=INFOCMP.htm>infocmp(1M)</a>] с  помощью
компилятора  <a href=TIC.htm>tic(1M)</a>. Чтение этого файла производится с
помощью процедуры setupterm [см. <a href=CURSES.htm>curses(3X)</a>].
<p align=justify>
Скомпилированный  файл  делится на 6 секций: заголовок,
имена терминалов, флаги, числа, цепочки символов,  таблица цепочек.
<p align=justify>
Секция  заголовок находится в начале файла. В этой секции содержатся 6 коротких целых чисел:
<ol>
<li>Магическое число (восьмеричное 0432).
<li>Размер (в байтах) секции имен.
<li>Размер (в байтах) секции флагов.
<li>Количество коротких целых в секции чисел.
<li>Количество  коротких целых (смещений) в секции цепочек символов.
<li>Размер (в байтах) таблицы цепочек.
</ol><p align=justify>
Следующей идет секция имен терминалов. В ней содержится
первая строка из описания <a href=TERMINFO.htm>terminfo(4)</a>, в которой  перечисляются  различные имена данного терминала, разделенные символами | [см. <a href=TERM~1.htm>term(5)</a>]. Эта  секция  завершается
нулевым байтом.
<p align=justify>
В секции флагов под каждый флаг  отводится  один  байт.
Этот  байт  равен  0 или 1, в зависимости от того, присутствует соответствующая характеристика или отсутствует. Значение 2 означает, что  соответствующая  характеристика отменена. Характеристики перечисляются в том же
порядке, что и во включаемом файле &lt;term.h&gt;.
<p align=justify>
Между секцией флагов и секцией чисел при  необходимости
вставляется  нулевой  байт, обеспечивающий выравнивание
начала секции чисел по границе полуслова. Все  короткие
целые выравниваются по границе полуслова.
<p align=justify>
Секция  чисел  похожа на секцию флагов. Описание каждой
характеристики занимает 2 байта и представляется коротким целым числом. Значения -1 и -2 означают, что характеристика отсутствует.
<p align=justify>
Секция цепочек устроена аналогично. Описание каждой характеристики занимает 2 байта и представляется коротким
целым числом. Значения -1 и -2 означают,  что  характеристика отсутствует. В противном случае значение представляет  собой смещение цепочки от начала таблицы цепочек. Специальные символы типа ^X или \c записываются во
внутреннем виде, а не в виде  пары  печатных  символов.
Информация  о  заполнителях ($&lt;nn&gt;) и о параметрах (%x)
записывается в текстовом виде, без интерпретации.
<p align=justify>
Последней секцией является таблица цепочек. Она  содержит  все  цепочки  символов,  на которые есть ссылки из
секции цепочек. Каждая цепочка завершается нулевым байтом.
<p align=justify>
Отметим, что процедура setupterm может быть  рассчитана
на другой набор характеристик, чем тот, который реально
присутствует в файле. База данных может измениться после  компиляции  setupterm,  из-за чего в ней могут появиться нераспознаваемые  характеристики  или  наоборот,
setupterm  может распознавать больше характеристик, чем
реально  описано  в  базе  данных.  Для   того,   чтобы
setupterm  могла  работать во всех случаях, в заголовок
включены размеры других  секций.  Новые  характеристики
должны добавляться после уже существующих.
<p align=justify>
В качестве примера ниже  приводится  восьмеричный  дамп
описания терминала Data General Dasher D200:
<pre>
 d200|d100|data general dasher 200,                                  
 am, bw,                                                     
 cols#80, lines#24,                                          
 bel=^G, clear=\f, cr=\r, cub1=^Y, cud1=^Z, cuf1=^X,         
 cup=^P%p2%c%p1%c, cuu1=^W, el=^K, home=\b, ind=\n,          
 kcub1=^Y, kcud1=^Z, kcuf1=^X, kcuu1=^W, kf0=^^z,            
 kf1=^^q, kf2=^^r, kf3=^^s, kf4=^^t, kf5=^^u, kf6=^^v,       
 kf7=^^w, kf8=^^x, kf9=^^y, khome=\b, lf0=f10, nel=\n,       
 rmso=^^E, rmul=^U, smso=^^D, smul=^T,                       

 0000 032 001   "  \0 033  \0  \r  \0   ) 001   z  \0   d   2   0   0
 0020   |   d   1   0   0   |   d   a   t   a       g   e   n   e   r
 0040   a   l       d   a   s   h   e   r       2   0   0  \0 001 001
 0060  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0
 0100  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0   P  \0 377 377 030  \0
 0120 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377
 0140 377 377 377 377 377 377   "  \0   &  \0 377 377 377 377   $  \0
 0160   &lt;  \0 377 377 377 377 377 377   .  \0   *  \0   &gt;  \0 377 377
 0200   (  \0 377 377 377 377   ,  \0 377 377   :  \0 377 377 377 377
 0220 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377
 0240 377 377 377 377 377 377 377 377 377 377   u  \0   x  \0 377 377
 0260 377 377 377 377 377 377 377 377 377 377   p  \0   s  \0 377 377
 0300 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377
 0320 377 377 377 377 377 377 377 377 377 377 377 377 377 377   D  \0
 0340 377 377 377 377 377 377   J  \0   M  \0 377 377   P  \0   S  \0
 0360   V  \0   Y  \0   \  \0   _  \0   b  \0   e  \0   h  \0 377 377
 0400 377 377   B  \0 377 377 377 377 377 377   F  \0 377 377 377 377
 0420 377 377   H  \0 377 377 377 377   j  \0 377 377 377 377 377 377
 0440 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377
 0460 377 377   n  \0 377 377 377 377 377 377 377 377 377 377 377 377
 0500 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377
 *                                                                   
 0540 377 377 377 377 377 377   @  \0 377 377 377 377 377 377 377 377
 0560 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377 377
 *                                                                   
 1260 377 377 377 377 377 377   d   2   0   0   |   d   1   0   0   |
 1300   d   a   t   a       g   e   n   e   r   a   l       d   a   s
 1320   h   e   r       2   0   0  \0 007  \0  \f  \0  \r  \0 031  \0
 1340 032  \0 030  \0 020   %   p   2   %   c   %   p   1   %   c  \0
 1360 027  \0 013  \0  \b  \0  \n  \0 031  \0 032  \0 030  \0 027  \0
 1400 036   z  \0 036   q  \0 036   r  \0 036   s  \0 036   t  \0 036
 1420   u  \0 036   v  \0 036   w  \0 036   x  \0 036   y  \0  \b  \0
 1440   f   1   0  \0  \n  \0 036   E  \0 025  \0 036   D  \0 024  \0
 1460
</pre>                                                                
<p><b>ФАЙЛЫ</b>
<pre>
/usr/lib/terminfo/?/* Скомпилированная база данных описаний терминалов.
/usr/unclude/term.h   Включаемый   файл   описаний  для <a href=TERMINFO.htm>terminfo(4)</a>.
</pre>
<p><b>СМ. ТАКЖЕ</b><br>
<a href=CURSES.htm>curses(3X)</a>, <a href=TERMINFO.htm>terminfo(4)</a>, <a href=TERM~1.htm>term(5)</a>.<br>
<a href=INFOCMP.htm>infocmp(1M)</a> в Справочнике администратора.
<p align=justify><b>ОГРАНИЧЕНИЯ</b><br>
Общий  размер скомпилированного описания каждого терминала не должен превышать 4096 байт; размер секции  имен
терминалов не должен превышать 128 байт.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
