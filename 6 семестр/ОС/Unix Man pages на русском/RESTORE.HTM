<html>
<head>
<title>RESTORE(1) </title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>RESTORE(1) </h3>
<p align=justify><b>ИМЯ</b><br>
restore, restor  - Подключает восстановитель инкрементной фай       ловой системы.
<p><b>СИНТАКСИС</b>
<pre>
	restore key [ arguments ]
	restor key [ arguments ]
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Команда restore используется для чтения архивной среды,  зарезервированной с помощью команды <a href=BACKUP.htm>backup(1)</a>.
<p align=justify>Ключ key описывает действия,  которые должны  быть  выполнены.
Key - это один из символов cC,  rR, tT или xX произвольно комбинированный с опциями k и/или f,  либо с F.  Команда restor это та же самая команда, отличающаяся только написанием названия.
<table>
<tr valign=top><th>c,C   <td>   Проверяет ленту дампа.  Используется после того,  как
сделан дамп,  для того,  чтобы убедиться в отсутствии
ошибок ввода-вывода или ошибок в контрольной сумме. С
- это тоже самое,  что и с,  но С обеспечивает  более
высокий уровень качества проверки.
<tr valign=top><th>f    <td>    Использует первый аргумент (argument) в качестве имени архива (резервное устройство /dev/*) вместо принятого по умолчанию.
<tr valign=top><th>F    <td>    F - это номер первого файла на ленте для чтения.  Все
файлы вплоть до указанного пункта пропускаются.
<tr valign=top><th>k    <td>    Вслед за этой опцией необходимо  указать  размер  резервного тома. Эта опция позволяет выполнять считывание многотомных дампов с таких носителей,  как гибкие
диски.
<tr valign=top><th>r,R   <td>   Архив считывается  и  загружается в файловую систему,
описанную в аргументе argument.  К этому надо  отнестись серьезно.  Если задан ключ R, то команда restore
запрашивает, какой из архивов  многотомной  установки
следует стартовать.  Это  позволяет прерывать и вновь
стартовать команду restore (перед  повторным  стартом
необходимо выполнить команду fsck).
<tr valign=top><th>t    <td>    Печатает дату  написания архива и дату резервирования
файловой системы.
<tr valign=top><th>T    <td>    Распечатывает полный листинг ленты дампа. По аналогии
с опцией t.
<tr valign=top><th>x   <td>     Выделяется каждый файл из архива,  поименованного аргументом (argument). В имени файла удаляются все монтировочные приставки;  например,  если  /usr является
смонтированной файловой системой,  то в данном архиве
файлу /usr/bin/lpr присваивается имя /bin/lpr.
<p align=justify>Выделенный файл размещается в файле с численным  именем, данным  командой  restore  (фактически это номер
узла).
<p align=justify>Для того, чтобы свести к минимуму итоговое чтение архива, рекомендуется следующая процедура:
<ol>
<li> Установите том 1 набора резервных архивов.
<li> Наберите на клавиатуре команду restore с соответствующим ключом и аргументами.
<li> Команда restore проверит  каталог  dumpdir,  затем
сообщит, найдены ли файлы,  назначит данным файлам
численное имя и в случае ленты прокрутит ее к  началу данного архива.
<li> Далее команда запрашивает вас:  "mount the desired
tape  volume"  ("монтировать желаемый том ленты").
Наберите номер выбранного вами тома. При многотомном резерве рекомендуется порядок монтирования томов от последнего до первого. Команда restore проверяет,  имеются ли в наличии любые из запрашиваемых файлов в смонтированном архиве ( или в последнем  архиве,  тогда принимается обратный порядок).
Если вы работаете с однотомным резервом,  или если
количество восстанавливаемых файлов велико, то ответьте на запрос номером 1,  и команда restore будет считывать архивы в последовательном порядке.
</ol>
<tr valign=top><th>X   <td>     То же,  что и x, за исключением того, что файлы переносятся в исходное положение.  Когда  вы  пользуетесь
этой опцией, опустите начальный знак (/) в имени файла в командной строке restore.
</table>
<p align=justify>Опцию r следует использовать только для восстановления полного
резервного архива в чистую файловую систему,  или восстановления инкрементного  резервного  архива  в  специально созданную
файловую систему.  Не следует  использовать  эту  команду  для
восстановления  любого  резервного  архива в корневую файловую
систему. Таким образом:
<pre>
	/etc/mkfs /dev/hd1 10000
	restore r /dev/hd1
</pre>
<p align=justify>- это типичная последовательность для  восстановления  полного
резерва. Повторная команда restore может  быть  выполнена  для
получения инкрементного резерва поверх предыдущего.
<p align=justify>Аргумент backup,  с последующими командами mkfs и restore, используется для изменения размера файловой системы.
<p><b>ФАЙЛЫ</b>
<pre>
	rst*                     Временные файлы
	/etc/default/restor      Имя архивного устройства по умолчанию
</pre>
Архивное устройство,  назначенное по умолчанию, изменяется при
установке системы.
<p align=justify><b>ЗАМЕЧАНИЯ</b><br>
Не возможно успешно восстановить полную активную корневую файловую систему.
<p align=justify>Заметим также,  что  команда  restore  может  быть не способна
восстановить более,  чем одну файловую систему с ленточных накопителей /dev/nrct0 и /dev/nrct2.
<p align=justify><b>ДИАГНОСТИКА</b><br>
Существуют различные диагностические  сообщения,  связанные  с
чтением архива  и  записью на диск.  Диагностические сообщения
выводятся также в том случае, если i-список или свободный список данной  файловой системы не достаточно велик для поддержания дампа. Если дамп занимает более одного диска или ленты, то
команда restore  может запросить вас о смене дисков или ленты.
Когда следующее устройство будет установлено,  нажмите на клавишу новой строки.
<p><b>СМ. ТАКЖЕ</b><br>
<a href=BACKUP.htm>backup(1)</a>, <a href=DUMPDIR.htm>dumpdir(1)</a>, fsсk(8), <a href=MKFS~1.htm>mkfs(8)</a>, <a href=SDDATE.htm>sddate(1)</a>
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
