<html>
<head>
<title>STDIPC(3C)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>
<h3 align=center>STDIPC(3C)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
stdipc: ftok - стандартный пакет для обмена сообщениями
между процессами
<p><b>СИНТАКСИС</b>
<pre>
	#include &lt;sys/types.h>
	#include &lt;sys/ipc.h>
	
	key_t ftok (path, id)
	char *path;
	char id;
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Все средства обмена между процессами требуют от пользователя  передачи  ключа  системным  вызовам  <a href=MSGGET.htm>msgget(2)</a>,
<a href=SEMGET.htm>semget(2)</a> и <a href=SHMGET.htm>shmget(2)</a>,  предоставляющим  идентификаторы
очередей сообщений. Один из предлагаемых способов  формирования ключа - использование описываемой ниже  функции ftok. Другой путь составления  ключей  -  поместить
идентификатор проекта в старший байт и использовать оставшуюся часть как порядковый номер. Есть много  других
способов формирования ключей, но для каждой системы необходимо определить стандарт на их  формирование.  Если
стандарт не соблюдается, то возможно, что не  связанные
между собой процессы будут  непреднамеренно  конфликтовать. Следует  настоятельно  рекомендовать  помещать  в
старший байт ключа символ, каким-либо образом идентифицирующий проект; тогда ключи не  будут  пересекаться  в
пределах данной системы.
<p align=justify>Функция ftok возвращает ключ, сформированный по  заданным значениям path и id и готовый для  использования  в
последующих системных вызовах msgget, semget и  shmget.
Аргумент path должен быть указателем на маршрутное  имя
существующего файла, доступного данному процессу. Аргумент id должен задавать символ, однозначно  идентифицирующий проект. Заметим,  что  функция  ftok  возвращает
одинаковые ключи для разных ссылок на  один  и  тот  же
файл, если задается одно и то же значение id, и  разные
ключи, если задаются одинаковые имена файлов, но разные
значения id.
<p><b>СМ. ТАКЖЕ</b><br>
<a href=INTRO~1.htm>intro(2)</a>, <a href=MSGGET.htm>msgget(2)</a>, <a href=SEMGET.htm>semget(2)</a>, <a href=SHMGET.htm>shmget(2)</a>.
<p align=justify><b>ДИАГНОСТИКА</b><br>
Функция ftok возвращает значение (key_t) -1, если  файл
с заданным маршрутным  именем path  не  существует  или
этот файл не доступен процессу.
<p align=justify><b>ПРЕДОСТЕРЕЖЕНИЯ </b><br>
Если файл, имя которого передавалось функции ftok, удаляется, когда ключ еще ссылается на файл, то  последующие вызовы функции ftok с теми же аргументами path и id
завершаются неудачей. Если файл с тем же именем  создается заново, то функция ftok, вероятно, возвратит  другой ключ, отличный от того, что был выдан для  первоначального файла.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>