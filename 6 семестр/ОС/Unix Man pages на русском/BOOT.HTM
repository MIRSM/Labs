<html>
<head>
<title>BOOT(HW)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>BOOT(HW)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
boot - программа загрузки системы UNIX.
<p align=justify><b>ОПИСАНИЕ</b><br>
boot  -  интерактивная  программа,  используемая  для  загрузки   и
выполнения  отдельных  программ  системы  UNIX.  Она  используется
главным  образом  для  загрузки  и  выполнения ядра UNIX, но может
также  использоваться  для  згрузки  и  выполнения прочих программ,
скомпилированных  для  изолированного  выполнения.  boot   является
необходимой   частью   операционной   системы   UNIX   и    должна
присутствовать в  корневом каталоге  корневой файловой  системы для
обеспечения успешной загрузки ядра системы UNIX.
<p align=justify>
Программа  boot  вызывается  системой  всякий раз, когда включается
компьютер.  Для  перезапуска  системы,  минуя  длительные процедуры
разгрузки,  используйте  команду   reboot,  которая   перезагружает
систему  после  разгрузки,  не  ожидая  ввода  с  клавиатуры.   Для
получения дополнительной информации смотрите haltsys(8).
<p>
При загрузке с дискеты эта процедура включает три этапа:
<ol>
<li>Коды  ПЗУ загружают  в память  блок загрузки  с нулевого сектора
дискеты, который совпадает с нулевым сектором файловой системы.
<li>Загрузочный   блок  загружает  файл  /boot  из  файловой системы
дискеты.
<li>Файл /boot выполняется и выдает подсказку для пользователя.
</ol>
При загрузке с жесткого диска эта процедура включает пять этапов:
<ol>
<li>Коды ПЗУ загружают в память блок главного загрузчика с  нулевого
сектора жесткого диска.
<li>Блок главного загрузчика загружает после этого загрузочный  блок
разделов  (boot0)  из  нулевого  сектора  активного раздела (см.
fdisk(8)).
<li>Затем,   предполагая,  что  активным  разделом  является  раздел
системы  UNIX,   загружаются  коды  boot1, располагающиеся после
первого  килобайта  в  активном  разделе  версии 2.2 инсталляции
UNIX  или  старше.   Если  на  диске инсталлирована более ранняя
версия UNIX,   то предполагается,  что коды  boot1 начинаются  в
активном разделе после  третьего килобайта. Коды  boot1 занимают
на диске 20 физически последовательных блока размером 1K.
<li>boot1 загружает /boot из файловой системы UNIX.
<li>/boot выполняется и выдает подсказку для пользователя.
</ol><p align=justify>
Файлы /boot  и  /kernel  могут  находиться  на дорожках, отмеченных
программой  badtrk(8).   Главный   загрузчик  (masterboot), boot0 и
boot1 не могут располагаться на дефектных дорожках.
<p align=justify>
Процедура загрузки с жесткого диска запускается в том случае, если
карман дисковода гибких дисков пуст.
<p align=justify>
При  первом   вызове  boot   высвечивает  подсказку   для   задания
местоположения программы, подлежащей загрузке:
<pre>
  UNIX System V

  Boot
  :
</pre><p align=justify>
Для задания местоположения этой программы нужно указать  устройство
и  имя  файла.  Это  имя  должно  являться  полным  именем   файла,
содержащего самостоятельную программу.  Вы можете высветить  список
доступных в текущий момент имен, набрав вопросительный знак (?).
<p>
Устройство и полное имя задаются в следующем формате:
<pre>
  xx(m,o)filename
</pre>
или
<pre>
  xx(m)filename
</pre>
где:
<ul>
<tt>xx</tt> - имя устройства ('hd' - для жесткого диска и 'fd' - для дискеты)<br>
<tt>m</tt> - малое (меньшее) число устройства (40 - для корневой файловой системы на жестком диске)<br>
<tt>o</tt> - смещение в разделе (обычно 0). Это значение задавать не
обязательно.<br>
<tt>filename</tt> - стандартное полное имя. Может начинаться с косой
черты, если программа находится не в корневом каталоге.
</ul><p align=justify>
Все  числа  задаются  в  десятичном  виде.  Малые  (меньшие)  числа
устройств  смотрите  на  страницах  документации  hd(HW)  и fd(HW).
Задавать  смещение   не  обязательно.   Местоположение   подлежащей
загрузке   программы   задается   в   первую   очередь   и  обязано
присутствовать,  если  в  командной  строке или в /etc/default/boot
задаются прочие загрузочные опции.
<p align=justify>
Если вы хотите ввести в процедуру загрузки паузу и ожидание нажатия
&lt;RETURN&gt;  перед  выполнением   загружаемой  программы,  введите   в
командную строку слово "prompt". Например, если вы введете "prompt"
и  нажмете  &lt;RETURN&gt;,  то  boot  выдаст следующее сообщение и будет
ждать нажатия этой клавиши снова:
<pre>
  Loaded, press &lt;RETURN&gt;
</pre>
Данная подсказка может быть заменена на другую строку, например:
<pre>
   prompt="change diskettes now"
</pre><p align=justify>
При этом boot загрузит  с дискеты xenix, выведет  сообщение "change
diskettes now" и будет ждать нажатия &lt;RETURN&gt;. Между словом prompt,
знаком "="  и строкой  подсказки не  должно быть  никаких символов,
хотя сама эта  строка может содержать  пробелы. Когда вы  нажимаете
&lt;RETURN&gt;, xenix начинает свою работу. "Prompt" может быть  включено
как  в  командной  строке,  так  и  в файле /etc/default/boot. Если
подсказка не  задана, то  boot выполняет  загруженную программу, не
останавливаясь.
<p align=justify>
Если  вы  только  что  загрузили  программу  boot  с дистрибутивной
дискеты,  нажмите  просто  &lt;RETURN&gt;  и  boot  установить   значения
параметров по умолчанию.
<p>
Для загрузки системы UNIX с жесткого диска введите:
<pre>
   hd(40,0)unix
</pre><p align=justify>
Для  запуска  загрузочной  строки,  используемой  по  умолчанию   и
задаваемой  в  файле  /etc/default/boot,  нажмите  &lt;RETURN&gt;,  когда
система высветит  загрузочную подсказку,  и boot  возьмет значения,
заданные структурой DEFBOOTSTR в этом файле.
<p align=justify>
Если  за  короткое  время  не   было  введено  ничего  и  в   файле
/etc/default/boot корневой файловой системы LOADUNIX=YES, то  boot
по  истечении  заданного  времени  поведет  себя,  как если бы была
нажата  клавиша  &lt;RETURN&gt;,  за  исключением  того  случая,  когда в
загрузочной   строке   включено   "auto".   (Если   кроме   задания
LOADUNIX=YES задано еще и TIMEOUT=n, то boot будет ждать истечения
n  секунд.)  boot  выполняет  загрузочную  процедуру,  и  программе
init(5) передается аргумент -a без "prompt".
<p align=justify>
Рекомендуется  устанавливать  на  жестком  диске  систему  DOS,  до
установки системы   UNIX. (См.  dos(1)). При  установленной системе
DOS вы можете загрузить ее с подсказки "Boot" системы  UNIX,  введя
слово "dos".
<p align=justify>
Во время  инсталляции системы  XENIX на  жесткий диск  записывается
подходящий   главный   загрузчик   (masterboot).   Если    задается
нестандартный   жесткий   диск,   то   его   параметры  хранятся  и
активизируются в этом главном загрузчике.
<p align=justify><i>Установка конфигурации ядра системы</i><br>
Программа   boot   передает   загрузочную   строку,   введенную  на
загрузочную  подсказку,  ядру  системы,  исключая  при  этом строку
"prompt".
<p align=justify>
Ядро читает эту загрузочную строку и определяет, какие периферийные
устройства  отвечают  за  корневую  файловую  систему,  конвейер  и
свопинг.   Если   эти   устройства    не   заданы   ни   в    файле
/etc/default/boot,  ни  в   командной  строке,   то  по   умолчанию
используются  устройства, включенные в ядро при его компоновке.
<p align=justify>
Добавочные аргументы в командной строке, которые могут изменить эти
действия и имеют вид:
<pre>
   dev=xx(m,o)
</pre>
или
<pre>
   dev=xx(M)
</pre>
где:
<ul>
<tt>dev</tt> - Нужное системное устройство (root[dev], pipe[dev] или
swap[dev])<br>
<tt>xx, m, o</tt> - те же, что и для загрузочного устройства.
</ul><p align=justify>
Если  задана  какая-либо  комбинация  root,  pipe  и  swap,  то эти
системные устройства будут относиться к указанным устройствам, если
же  системные  устройства  не  будут  заданы, то по умолчанию будут
использоваться  установки  включенные  в  ядро  при его компоновке.
Установка одного устройства  не влияет на  установки по   умолчанию
других устройств.
<p align=justify><i>Выбор системной консоли</i><br>
Вы  можете  выбрать  системную  консоль  во  время  загрузки, введя
команду  systty=x  на  загрузочную  подсказку  или вставив ключевое
слово SYSTTY=x в файл /etc/default/boot. Буква x представляет собой
либо число, либо строку.
<p align=justify>
Если вы  используете во  время загрузки  команду systty=x,  то boot
передаст  параметр  x,  соответствующий  выбранной  консоли,   ядру
системы. Значения параметра x загрузочной строки systty таковы:
<pre>
   sio    Последовательный порт COM1
   scrn   Адаптер дисплея
</pre><p align=justify>
Например,   для   того,    чтобы   приписать   системную    консоль
последовательному  порту  COM1,  введите  на  загрузочную подсказку
следующую команду:
<pre>
   systty=sio
</pre><p align=justify>
Если  вы  не  стали  задавать  во  время  загрузки  выбор системной
консоли, то  программа boot  для ее  определения выполнит следующие
действия:
<blockquote>
boot читает файл /etc/default/boot  и ищет в нем  ключевые слова
SYSTTY=x, где x - число, определяющее системную консоль.
<pre>
      1  означает последовательный адаптер порта COM1.
      0  означает адаптер дисплея.
</pre>
Если SYSTTY не найдено  или файл /etc/default/boot не  читается,
то boot  проверяет адаптер  дисплея и  назначает его  в качестве
системной консоли.
<p>
Если  адаптер  дисплея  не  обнаружен,  то  boot ищет порт COM1,
устанавливает  его  на  скорость  передачи  данных  9600  бод, 8
информационных битов, отсутствие контроля четности и  использует
в качестве системной консоли.
</blockquote><p align=justify>
Таким образом, для того, чтобы автоматически установить в качестве
системной консоли последовательный порт COM1, введите в файл
/etc/default/boot строку:
<pre>
  SYSTTY=1
</pre>
<p align=justify><i>Назначение псевдонимов</i><br>
Ряд системных устройств может  получить в качестве псевдонима  одно
ключевое слово, которое  задается в файле  /etc/default/boot. После
этого данное  ключевое слово  можно ввести  в загрузочную командную
строку,  и  программа  boot  прочитает информацию о соответствующих
системных устройствах в файле /etc/default/boot и затем передаст ее
ядру системы. Псевдоним задается в следущем виде:
<pre>
   key=file [root=xx9m0 pipe=xx(m) swap=xx(M) prompt[="string"]]
</pre>
Во  всех  случаях  спецификация   устройства  может  иметь   формат
dev=xx(m,o), где o - смещение.
<p align=justify>
Например,  если  вы  имеете  корневую  файловую  систему  на втором
жестком  диске  и  хотите  использовать  ее,  но  при  этом  хотите
загрузиться с помощью файла xenix, расположенного на первом жестком
диске, введите в файл /etc/default/boot следующую строку:
<pre>
  disk2=hd(40,0)unix root=hd(104,0) prompt="Using second disk"
</pre><p align=justify>
При очередной загрузке системы с первого жесткого диска введите  на
загрузочную  подсказку  "disk2".  Тогда  xenix  будет загружаться с
первого жесткого диска, и когда вы увидите сообщение "Using  second
disk",  нажмите  &lt;RETURN&gt;.  После  этого  xenix загрузится  и будет
работать  с  корневой  файловой  системой  на втором жестком диске.
Обратите   внимание,   что    вам   нужно   отредактировать    файл
/etc/default/boot в корневой файловой системе на устройстве, откуда
будет считываться boot, в данном случае - на первом жестком диске.
<p align=justify>
Другой пример:  предположим, что  вы хотите  загрузиться со второго
дисковода (hd10) и использовать на нем корневую файловую систему  и
пространство  свопинга.   Тогда  во   время  загрузки   используйте
следующую загрузочную строку:
<pre>
  hd(104)unix root=hd(104) pipe=hd(104) swap=hd(105)
</pre>
После загрузки  вы должны  создать дескрипторы  устройств на втором
дисководе с помощью следующих утилит:
<pre>
  fixperm -c -dHD1 /etc/perms/inst
</pre>
<p align=justify><i>Загрузочные опции</i><br>
Загрузочные опции  могут быть  изменены с  помощью ключевых  слов в
файле  /etc/default/boot.  Программа   boot  распознает   следующие
ключевые слова:
<table border=1>
<tr valign=top><td>LOADUNIX=YES<td>Если  задано  YES,  то boot автоматически
загружает   систему  UNIX  по   истечении
времени,     определяемого     параметром
TIMEOUT.  По  умолчанию   устанавливается
задержка на 60 секунд.</tr>
<tr valign=top><td>DEFBOOTSTR=string<td>Cтрока   string    служит   в    качестве загрузочной   строки,   используемой   по
умолчанию в отсутствие ввода из командной
строки.  Между  DEFBOOTSTR,  знаком "=" и
строкой string не должно быть пробелов.</tr>
<tr valign=top><td>SYSTTY=x<td>Если x=1, то в качестве системной консоли
устанавливается последовательный  адаптер
порта   COM1.   Если   x=0,   в  качестве
системной  консоли   выбирается   главный
адаптер дисплея.</tr>
<tr valign=top><td>RONLYROOT=NO<td>Будет   ли   корневая   файловая  система
монтироваться  в   статусе  "только   для
чтения".    Данный    параметр     должен
устанавливаться в  "yes" только  во время
инсталляции.</tr>
<tr valign=top><td>FSCKFIX=YES или NO<td>Будет ли  fsck(8)  исправлять  какие-либо
ошибки в корневой файловой системе  сама.
Если  устанавливается  значение  YES,  то
fsck(8)    запускается     в    отношении
корневой  файловой  системы  с аргументом
-rr.</tr>
<tr valign=top><td>MULTIUSER=YES или NO<td>Вызывает ли init(8) sulogin или переходит в многопользовательский режим.</tr>
<tr valign=top><td>PANICBOOT=YES или NO<td>Перезагружается ли система после  реакции на   сбой    panic().   Эта    переменная считывается  программой  init  из   файла /etc/default/boot.</tr>
<tr valign=top><td>TIMEOUT=n<td>n - количество секунд ожидания ввода при
загрузке (если LOADUNIX=YES).</tr>
</table>
<p align=justify><b>ДИАГНОСТИКА</b><br>
При  возникновении  ошибки  главный  загрузчик  выдает сообщение об
ошибке  и   блокирует  систему.   Далее  приводится   список  самых
распространенных сообщений и их значение:
<dl>
<dt>IO ERR
<dd>Ошибка  при  потке  чтения  главным  загрузчиком  блока загрузки
разделов активной операционной системы.
<dt>BAD TBL
<dd>Указатель  загрузочных  разделов  хотя  бы одной из операционных
систем в таблице разделов содержит нераспознаваемый код.
<dt>NO OS
<dd>Неустранимая ошибка, мешающая выполнению загрузчика операционной
системы активного раздела.
</dl><p align=justify>
Когда  boot   высвечивает  сообщения   об  ошибках,    пользователь
возвращается к подсказке "Boot". Далее  приводится   список   самых
распространенных сообщений и их значение:
<dl>
<dt><tt>bad magic number</tt>
<dd>Данный файл не является выполняемой программой.
<dt><tt>can't open &lt;pathname&gt;</tt>
<dd>Заданное  полное  имя  не  соответствует существующему файлу или
известному устройству.
<dt><tt>Stage 1 boot failure</tt>
<dd>Загрузчик  не  может  найти  или  прочитать файл boot. Вы должны
перезапустить компьютер  и обеспечить  доступ к  диску с  файлом
boot в корневом каталоге.
<dt><tt>not a directory</tt>
<dd>Заданная область устройства не содержит действительную  файловую
систему UNIX.
<dt><tt>zero length directory</tt>
<dd>Найденная  файловая  система  содержит  каталог нулевого объема.
Наиболее  часто   это  случается,   когда  в   заданной  области
располагается файловая система версий, более ранних, чем  версия
System V UNIX (с неправильным или несовместимым форматом слов).
<dt><tt>fload:read(x)=y</tt>
<dd>При попытке чтения x байтов было прочитано только y байтов.  Это
случается  из-за  преждевременного  обнаружения  символа   конца
файла.  Это  может  быть  также  вызвано  пвреждением  файла или
неверным форматом слов дескриптора (заголовка).
</dl>
<p><b>ФАЙЛЫ</b>
<pre>
 /boot
 /etc/default/boot
 /etc/masterboot
 /etc/hdboot0
 /etc/hdboot1
</pre>
<p><b>СМ. ТАКЖЕ</b><br>
autoboot(8), badtrk(8), fd(HW), fdisk(8), haltsys(8),
hd(HW), init(5), sulogin(5)
<p align=justify><b>ПРИМЕЧАНИЯ</b><br>
Компьютер осуществляет попытку  загрузиться с дискеты  в дисководе.
Если дискета не содержит истинной загрузочной программы,  возникают
ошибки.
<p align=justify>
Программа boot  не может  быть использована  для загрузки программ,
которые не были  скомпонованы для самостоятельного  выполнения. Для
создания  самостоятельных  программ  нужно  использовать  опцию  -A
компоновщика системы  UNIX  (ld(1))  и специальные  самостоятельные
библиотеки.
<p align=justify>
Самостоятельные  программы  могут  функционировать  в  реальном или
защищенном  режиме,  но  они  не  должны  использовать  большие или
сверхбольшие  модели  памяти.  В  реальном  режиме  программы могут
использовать процедуры ввода/вывода, зашитые в ПЗУ компьютера.
<p align=justify>
Параметр RONLYROOT должен быть установлен на значение "yes"  только
на  период  инсталляции.  Если  эта  установка  действует  во время
повседневных  операций,  то  она  не  даст  вам  изменять  корневую
файловую систему. В этом случае вам придется загрузиться с дискеты,
отредактировать файл /etc/default/boot и перезагрузиться.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
