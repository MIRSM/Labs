<html>
<head>
<title>PROF(1)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>PROF(1)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
prof - вывод результатов профилирования
<p><b>СИНТАКСИС</b>
<pre>
      prof  [-t] [-c] [-a] [-n] [-o] [-x] [-g] [-z] [-h] [-s] [-m файл_профиля]
            [прогр]
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Команда prof интерпретирует файл_профиля,  подготовленный с помощью функции <a href=MONITOR.htm>monitor(3C)</a>.  При  этом  читается
таблица  имен  об ектного  файла  прогр  (по  умолчанию
a.out) и соотносится  с  файлом_профиля  (по  умолчанию
mon.out). Для каждого внешнего объекта из секции команд
выдается время (в процентах), затраченное на выполнение
участка программы между адресом данного объекта и адресом следующего. Кроме того,  печатается  число  вызовов
каждой функции и среднее время в миллисекундах,  затраченное на один вызов.
<p align=justify>Следующие взаимоисключающие опции  определяют  критерий
сортировки выводимых строк:
<table>
<tr valign=top><th>-t <td>  Сортировать  по  уменьшению  доли  общего  времени
     (применяется по умолчанию).
<tr valign=top><th>-c  <td> Сортировать по уменьшению количества вызовов.
<tr valign=top><th>-a  <td> Сортировать по увеличению адресов.
<tr valign=top><th>-n  <td> Сортировать по именам лексикографически.
</table>
<p align=justify>Взаимоисключающие  опции  -o  и -x задают формат вывода
адресов объектов:
<table>
<tr valign=top><th>-o <td>  Выводить вместе с именем восьмеричный адрес объекта.
<tr valign=top><th>-x <td>  Выводить вместе с именем  шестнадцатеричный  адрес
     объекта.
</table>
<p align=justify>Следующие опции можно использовать в произвольной  комбинации:
<table>
<tr valign=top><th>-g  <td> Включить в выдачу неглобальные объекты  (статические функции).
<tr valign=top><th>-z <td>  Включить в выдачу все объекты из диапазона  профилирования  [см. <a href=MONITOR.htm>monitor(3C)</a>], даже если соответствующие им количество вызовов и доля общего времени равны нулю.
<tr valign=top><th>-h <td>  Подавить  выдачу  обычно  печатаемого   заголовка.
     (Данная опция полезна, если результаты  предназначены для последующей обработки.)
<tr valign=top><th>-s <td>  Выдать в стандартный протокол итоговую  информацию
     о профилировании.
<tr valign=top><th>-m файл_профиля <td>
     Использовать в качестве исходного файл_профиля,  а  не mon.out.
</table>
<p align=justify>Программа создает файл с данными  профилирования,  если
редактирование связей выполнялось командой <a href=CC.htm>cc(1)</a> с  опцией -p. При применении данной опции в начало  и  конец
программы вставляются вызовы функции <a href=MONITOR.htm>monitor(3C)</a>.  Второй из этих вызовов приводит к записи файла с результатами профилирования. Если  нужно,  чтобы  для  какой-то
функции было выдано количество ее вызовов, файл с  данной функцией следует компилировать с опцией -p.
<p align=justify>Имя файла, создаваемого профилируемой программой, определяется по переменной окружения PROFDIR. В случае  отсутствия переменной PROFDIR, в каталоге, текущем на момент окончания программы, создается файл mon.out.  Если
PROFDIR=цепочка, то создается файл  цепочка/идентификатор_процесса.имя_программы, где имя_программы  задается
аргументом командной строки argv[0] с  удаленным  маршрутным префиксом. Если значение PROFDIR является пустой
цепочкой, то данные о профилировании в файл не  записываются.
<p align=justify>В целях профилирования функция может  быть  разбита  на
подфункции с помощью макроса MARK [см. <a href=PROF.htm>prof(5)</a>].
<p><b>ФАЙЛЫ</b>
<pre>
     mon.out         Подразумеваемый файл профиля.
     a.out           Подразумеваемый файл с таблицей имен.
</pre>
<p><b>СМ. ТАКЖЕ</b><br>
<a href=CC.htm>cc(1)</a>.<br>
<a href=EXIT.htm>exit(2)</a>, <a href=PROFIL.htm>profil(2)</a>, <a href=MONITOR.htm>monitor(3C)</a>, <a href=PROF.htm>prof(5)</a> в  Справочнике
программиста.
<p align=justify><b>ПРЕДОСТЕРЕЖЕНИЯ</b><br>
Временные данные, выдаваемые для последовательных идентичных вызовов программы могут варьироваться в пределах
20 и более процентов из-за различий в  скорости  работы
кэш-памяти, разделяемой с другими процессами. Даже если
Вам кажется, что программа исполняется на компьютере  в
гордом одиночестве, то  и  тогда  скрытые  фоновые  или
асинхронные процессы могут исказить получаемые  данные.
В редких случаях сильное искажение измерений может произойти вследствие наложения циклов в программе и тактов
часов, инициирующих запись программного счетчика.
<p align=justify>Если не используется опция -g, то время выполнения статических функций  приписывается  к  предыдущим  внешним
объектам. Однако количество вызовов внешних функций сообщается верно.
<p align=justify><b>ОГРАНИЧЕНИЯ</b><br>
Создание файла профиля гарантируется только  для  программ, вызывавших <a href=EXIT.htm>exit(2)</a>  или  выполняющих  возврат  из
функции main. В других случаях нужно позаботиться о явном заключительном вызове функции monitor.
<p align=justify>При использовании для профилирования опции -p в команде
<a href=CC.htm>cc(1)</a> есть предел числа функций (600), для  которых  во
время выполнения программы подсчитывается  число  вызовов. Для  увеличения  этого  предела  следует  вызывать
функцию monitor самостоятельно. Если лимит будет превышен, то произойдет наложение данных и файл mon.out окажется испорченным. Число использованных счетчиков сообщается командой prof автоматически в том  случае,  если
оно превысило 5/6 максимума.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
