<html>
<head>
<title>BSEARCH(3C)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>BSEARCH(3C)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
bsearch - бинарный поиск в отсортированной таблице
<p><b>СИНТАКСИС</b>
<pre>
	#include &lt;search.h>
	
	char *bsearch ((char *) key, (char *) base, nel, sizeof (*key), compar)
	unsigned nel;
	int (*compar) ( );
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Функция bsearch предназначена для выполнения  бинарного
поиска в соответствии с алгоритмом, описанным  в  книге
Д. Кнута: Искусство программирования  для  ЭВМ.  Т.  3.
Сортировка, поиск. - М.: Мир, 1978. Раздел 6.2.1, алгоритм B.
<p align=justify>Функция  bsearch возвращает указатель внутрь таблицы на
искомые данные. Предварительно таблица должна быть  отсортирована  в возрастающем порядке согласно предоставленной функции сравнения.  Аргумент  key  указывает  на
об ект  данных,  разыскиваемый в таблице (ключ поиска);
base указывает на первый элемент  таблицы;  nel  задает
количество  элементов  в  таблице; compar - это функция
сравнения, аргументами которой при  вызове  служат  два
указателя  на  сравниваемые  элементы. В соответствии с
тем, какое целое число она  возвращает:  меньшее  нуля,
равное нулю или большее нуля, первый аргумент считается
меньшим, равным или большим по отношению ко второму.
<p><b>ПРИМЕР</b><br>
Следующий пример демонстрирует поиск в таблице,  содержащей указатели на узлы,  которые  состоят  из  цепочек
символов и их длин. Таблица отсортирована в  алфавитном
порядке по цепочкам символов в узлах.
<p align=justify>Приведем фрагмент программы, который считывает  цепочку
символов и ищет соответствующий узел, затем  распечатывает цепочку символов с ее длиной или выводит сообщение
об ошибке.
<pre>
	#include &lt;stdio.h>
	#include &lt;search.h>
	
	#define TABSIZE 1000
	
	struct node {                  /* Структура узлов */
	  char *string;
	  int length;
	};
	struct node table [TABSIZE];   /* Таблица для поиска */
	  ...
	
	{
	  struct node *node_ptr, node;
	  int node_compare (); /* Функция сравнения узлов */
	  char str_space [20]; /* Пространство для ввода цепочки
	                          символов */
	  ...
	
	  node.string = str_space;
	  while (scanf ("%s", node.string) != EOF) {
	    node_ptr =
	      (struct node *) bsearch ((char *) (&node),
	        (char *) table, TABSIZE,
	        sizeof (struct node), node_compare);
	    if (node_ptr != NULL) {
	      (void) printf ("string = %20s, length = %d\n",
	      node_ptr->string, node_ptr->length);
	    } else {
	      (void) printf ("not found:%s\n", node.string);
	    }
	  }
	}
	
	/*
	  Следующая функция сравнивает два узла по цепочкам
	  символов на основе алфавитного порядка
	*/
	int node_compare (node1, node2)
	char *node1, *node2;
	{
	  return strcmp (((struct node *) node1) -> string,
	                 ((struct node *) node2) -> string);
	}
</pre>
<p align=justify><b>ПРИМЕЧАНИЯ</b><br>
Указатели на ключ (key) и  на  первый  элемент  таблицы
(base) должны иметь тип "указатель на элемент" и преобразовываться к типу "указатель на символ".
<p align=justify>В сравнении, осуществляемом функцией compar, не  обязательно должен участвовать каждый байт, поэтому элементы
таблицы в дополнение к сравниваемым величинам могут содержать произвольные данные.
<p align=justify>Хотя функция bsearch описывается как имеющая тип  "указатель на символ",  возвращаемое  ею  значение  следует
преобразовывать к типу "указатель на элемент".
<p><b>СМ. ТАКЖЕ</b><br>
<a href=HSEARCH.htm>hsearch(3C)</a>, <a href=LSEARCH.htm>lsearch(3C)</a>, <a href=QSORT.htm>qsort(3C)</a>, <a href=TSEARCH.htm>tsearch(3C)</a>.
<p align=justify><b>ДИАГНОСТИКА</b><br>
В случае неудачного поиска  результатом  служит  пустой
указатель NULL
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
