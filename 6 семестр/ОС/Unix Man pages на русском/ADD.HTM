<html>
<head>
<title>ADD(1M)</title>
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>

<h3 align=center>ADD(1M)</h3>
<p align=justify><b>НАЗВАНИЕ</b><br>
add  - добавление драйвера устройства или модуля потока
к ядру ОС UNIX
<p><b>СИНТАКСИС</b>
<pre>
  /etc/add  [-o вых_файл] [-m master_файл] [-d dfile_файл] [-u ядро]
  [-t целевой_файл] [-s адрес_таблицы_имен] [-l] об ектный_файл ...
</pre>
<p align=justify><b>ОПИСАНИЕ</b><br>
Утилита  add  обеспечивает  все  действия по добавлению
драйверов устройств и/или модулей потоков к работающему
ядру ОС UNIX. Действия эти состоят в следующем:
<ol>
<li>Программа addconf [см. <a href=CONFIG.htm>config(1M)</a>] читает master_файл и dfile_файл  и  генерирует  конфигурационные
файлы conf.c и low.s, которые компилируются.
<li>Генерируется инструкция по загрузке.
<li>Редактируются  связи  между файлами conf.o, low.o,
ядром и об ектными_файлами. Инструкция по загрузке
информирует редактор связей <a href=LD.htm>ld(1)</a>, что ядро не надо загружать, то есть что используется только таблица имен UNIX-ядра для разрешения внешних ссылок.
В данном случае редактор связей  служит  лишь  для
вычисления размера выполняемого файла, который будет  порождаться позднее. Вычисленный размер передается следующему шагу.
<li>Программа  addkern  -a  [см. <a href=ADDKERN.htm>addkern(1M)</a>] выделяет
пространство в физической и виртуальной  памяти  и
возвращает  адрес, по которому позднее выполняемый
файл расположится в виртуальной памяти ядра.
<li>Этот адрес выдается на стандартный вывод и помещается в инструкцию по загрузке, придавая ей окончательный вид.
<li>Все связи редактируются снова с помощью инструкции
по загрузке, в которой уже фиксирован адрес.
<li>Программа <a href=DOWNLOAD.htm>download(1M)</a> загружает собранный  выполняемый файл в виртуальную память ядра. Если специфицирован адрес_таблицы_имен, то имена из выполняемого файла вставляются в эту таблицу.
<li>Вызов addkern -x делает драйверы  устройств  и/или
модули потоков известными для UNIX-ядра. В нем модифицируются таблицы, вставляются вектора прерываний, и, если требуется, вызываются функции инициализации. Вследствие этого на системную консоль могут выводиться некоторые сообщения.
<li>Если система к этому времени еще не завершила аварийно  свою  работу,  то будет выдано сообщение об
успешной установке новой версии.
</ol>
Опциям утилиты add приписан следующий смысл:
<table>
<tr valign=top><td>-o вых_файл<td>Задает имя выполняемого файла, порождаемого <a href=LD.htm>ld(1)</a>.
Если  имя  не специфицировано, то оно определяется
по имени первого об ектного_файла.</tr>
<tr valign=top><td>-m master_файл<td>Задает имя master_файла для программы addconf.  По
умолчанию используется имя master.</tr>
<tr valign=top><td>-d dfile_файл<td>Задает  имя  dfile_файла для программы addconf. По
умолчанию используется имя dfile.</tr>
<tr valign=top><td>-u ядро<td>Задает имя ядра для разрешения внешних ссылок.  По
умолчанию используется имя /unix.</tr>
<tr valign=top><td>-t целевой_файл<td>Задает  имя целевого_файла для программы download.
По умолчанию используется /dev/kmem.</tr>
<tr valign=top><td>-s адрес_таблицы_имен<td>Адрес_таблицы_имен передается программе download.</tr>
<tr valign=top><td>-l<td>Пропустить  первую из перечисленных выше фаз и использовать существующие файлы conf.o и low.o.</tr>
</table><p align=justify>
Вслед за  этими  опциями  должны  идти  об ектные_файлы
драйверов устройств и модулей потоков. Утилита add сохраняет  все  опции  и  имена  об ектных модулей в файле
.add. Не заданные в программе опции читаются  из  этого
файла. Если он не существует, то опции принимают значения по умолчанию. Такой способ получения опций позволяет  задать  все  опции только один раз. При последующих
выполнениях должны вводиться только новые или  измененные опции, а все остальные берутся из файла .add.
<p align=justify>
Утилита  add  использует  <a href=ADDKERN.htm>addkern(1M)</a> и, следовательно,
может вызываться только суперпользователем.
<p align=justify><b>ФАЙЛЫ</b>
<pre>
.add
/tmp/addldinstr Промежуточная инструкция по загрузке.
</pre>
<p align=justify><b>СМ. ТАКЖЕ</b><br>
<a href=ADDKERN.htm>addkern(1M)</a>, <a href=CONFIG.htm>config(1M)</a>, <a href=DOWNLOAD.htm>download(1M)</a>.
<p align=justify><b>ДИАГНОСТИКА</b><br>
Утилита  add написана на языке shell. В процессе ее работы могут поступать сообщения  от  используемых  программ.
<p align=justify><b>ПРЕДОСТЕРЕЖЕНИЯ</b><br>
Используйте add только в однопользовательском режиме.
<p align=justify>
Использование add может вызвать аварийный  отказ  Вашей
системы.
<p align=justify>
Использовать add рекомендуется только лучшим специалистам (гуру) по операционной системе UNIX.
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>
